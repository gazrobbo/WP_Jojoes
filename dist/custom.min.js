"use strict";var ignSlideTimer,menuButtons="";function placeMenuButtons(){var t=document.querySelector(".site-top");null!=t&&(t=t.clientHeight),menuButtons.length&&menuButtons.forEach(function(e){e.style.height=t+"px"})}function isHighDensity(){return window.matchMedia&&window.matchMedia("(-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi)").matches}function fileExists(e){var t=new XMLHttpRequest;return t.open("HEAD",e,!0),t.send(),404!=t.status}if(document.addEventListener("DOMContentLoaded",function(){"ontouchstart"in document.documentElement?document.documentElement.className+=" touch-device":document.documentElement.className+=" no-touch-device",menuButtons=document.querySelector(".app-menu")?document.querySelectorAll(".panel-right-toggle"):document.querySelectorAll(".panel-left-toggle, .panel-right-toggle");var l=null;function i(e,t){var n=1<arguments.length&&void 0!==t?t:"none";"on"===n?e.classList.add("toggled-on"):"off"===n?e.classList.remove("toggled-on"):e.classList.toggle("toggled-on");var o=e.classList.contains("toggled-on");e.setAttribute("aria-expanded",o?"true":"false");var i=e.getAttribute("data-toggle"),r=document.querySelectorAll(e.getAttribute("data-target"));null!==i&&i||(i="toggled-on"),r.length?r.forEach(function(e){if(o?e.classList.add(i):e.classList.remove(i),e.setAttribute("aria-expanded",o?"true":"false"),void 0!==e.dataset.slide){var t=e.dataset.slide?parseFloat(e.dataset.slide):.5;o?ignSlideDown(e,t):ignSlideUp(e,t)}e.dispatchEvent(l)}):"toggled-on"!==i&&(o?e.classList.toggle(i):e.classList.remove(i)),e.dispatchEvent(l)}isIE11?(l=document.createEvent("Event")).initEvent("afterToggle",!0,!0):l=new Event("afterToggle",{bubbles:!0}),document.querySelectorAll("[data-toggle]").forEach(function(e){e.setAttribute("role","switch"),e.setAttribute("aria-checked",e.classList.contains("toggled-on")?"true":"false")}),document.body.addEventListener("click",function(e){var t=e.target.closest("[data-toggle]");if(t){null===t.getAttribute("data-default")&&(e.preventDefault(),e.stopPropagation());var n=t.getAttribute("data-radio");if(null!==n)document.querySelectorAll('[data-radio="'.concat(n,'"]')).forEach(function(e){e!==t&&e.classList.contains("toggled-on")&&i(e)});var o=t.getAttribute("data-switch");null!==n?i(t,"on"):null!==o?i(t,"on"===o?"on":"off"):i(t)}});var a=0;function e(){var l=window.innerWidth;document.querySelectorAll("[data-moveto]").forEach(function(e){var t=e.getAttribute("data-moveat"),n=document.querySelector(e.getAttribute("data-moveto")),o=e.getAttribute("data-movefrom");if((t=t||1030).startsWith("--"))if(isIE11)t=1030;else{var i=getComputedStyle(document.body);t=parseInt(i.getPropertyValue(t),10)}if(n){if(!o){var r=e.parentElement.id;r||(e.parentElement.setAttribute("id","move-"+a),a++,r=e.parentElement.id),e.setAttribute("data-movefrom","#"+r)}o=document.querySelector(e.getAttribute("data-movefrom")),l<t||0==t?n.contains(e)||(e.hasAttribute("data-moveto-pos")?n.insertBefore(e,n.children[e.getAttribute("data-moveto-pos")]):n.appendChild(e)):o.contains(e)||(e.hasAttribute("data-movefrom-pos")?o.insertBefore(e,o.children[e.getAttribute("data-movefrom-pos")]):o.appendChild(e)),e.classList.add("visible")}}),placeMenuButtons(),document.querySelectorAll(".fixed-holder").forEach(function(e){e.style.height=e.firstElementChild.clientHeight+"px"})}window.addEventListener("resize",throttle(e,250)),e(),document.documentElement.classList.remove("dom-loading");var t=null;isIE11?(t=document.createEvent("Event")).initEvent("afterIgnEvents",!0,!0):t=new Event("afterIgnEvents"),document.dispatchEvent(t)}),isHighDensity()){var retinaImage=document.querySelectorAll("[data-high-res]");retinaImage.forEach(function(e){var t="";e.dataset.highRes?t=e.dataset.highRes:t=e.style.backgroundImage.slice(4,-1).replace(/"/g,"").replace(/(\.[^.]+$)/,"@2x$1");fileExists(t)&&(e.style.backgroundImage='url("'+t+'")')})}function fixOffScreenMenu(e){e.style.display="block",e.style.opacity="0";var t=e.getBoundingClientRect().right,n=e.getBoundingClientRect().right;e.style.display="",e.style.opacity="",document.documentElement.clientWidth<t&&(e.style.left="40px"),n<0&&(e.style.left="60%")}function openCloseMenu(t){var e=t.closest("li"),n=e.querySelector(".sub-menu");"open"==(t.classList.contains("toggled-on")?"open":"close")?(fixOffScreenMenu(n),e.classList.add("toggled-on"),ignSlideDown(n),document.querySelector("#page").addEventListener("click",function(e){e.target.closest(".menu-item.toggled-on")||(t.classList.remove("toggled-on"),openCloseMenu(t))},{once:!0})):(e.classList.remove("toggled-on"),ignSlideUp(n))}function wrap(e,t){return void 0===t&&(t=document.createElement("div")),e.parentNode.insertBefore(t,e),t.appendChild(e),t}function debounce(o,i,r){var l;return function(){var e=this,t=arguments,n=r&&!l;clearTimeout(l),l=setTimeout(function(){l=null,r||o.apply(e,t)},i),n&&o.apply(e,t)}}function throttle(o,i,r){var l,a;return i=i||250,function(){var e=r||this,t=+new Date,n=arguments;l&&t<l+i?(clearTimeout(a),a=setTimeout(function(){l=t,o.apply(e,n)},i)):(l=t,o.apply(e,n))}}function ignSlidePropertyReset(e){clearTimeout(ignSlideTimer),e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property")}function ignSlideUp(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:.5;ignSlidePropertyReset(e),e.style.height=e.offsetHeight+"px",e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"s",e.style.overflow="hidden",e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginBottom=0,e.style.marginTop=0,setTimeout(function(){e.style.height=0},100),ignSlideTimer=setTimeout(function(){e.style.display="none",ignSlidePropertyReset(e)},1e3*t)}function ignSlideDown(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:.5;ignSlidePropertyReset(e);var n=window.getComputedStyle(e).display,o=window.getComputedStyle(e).padding,i=window.getComputedStyle(e).margin;"none"===n&&(n="block"),e.style.display=n,e.style.height="auto",e.style.overflow="hidden";var r=e.offsetHeight;e.style.transitionProperty="none",e.style.height="0px",e.style.paddingTop="0px",e.style.paddingBottom="0px",e.style.marginTop="0px",e.style.marginBottom="0px",setTimeout(function(){e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"s",e.style.padding=o,e.style.height=r+"px",e.style.margin=i},100),ignSlideTimer=setTimeout(function(){ignSlidePropertyReset(e)},1e3*t)}function ignSlideToggle(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:.5;return"none"===window.getComputedStyle(e).display?ignSlideDown(e,t):ignSlideUp(e,t)}document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".svg-icon").forEach(function(e){e.classList.remove("svg-icon");var t=e.getAttribute("class"),n='<svg class="icon '.concat(t,'" role="img"><use href="#').concat(t,'" xlink:href="#').concat(t,'"></use></svg>');e.insertAdjacentHTML("afterend",n),e.remove()})}),document.addEventListener("DOMContentLoaded",function(){document.body.addEventListener("click",function(e){var t=e.target.closest('.menu a[href="#"]');t&&null!=t.nextElementSibling&&(e.preventDefault(),t.nextElementSibling.click())}),document.body.addEventListener("afterToggle",function(e){e.target.closest(".submenu-dropdown-toggle")&&openCloseMenu(e.target.closest(".submenu-dropdown-toggle"))}),document.querySelectorAll(".menu .current-menu-item .sub-menu, .menu .current-menu-parent .sub-menu").forEach(function(e){"column"===getComputedStyle(e.closest(".menu")).flexDirection&&(e.style.display="block",e.style.height="auto",e.closest(".menu-item").classList.add("toggled-on"),e.closest(".menu-item").querySelector(".submenu-dropdown-toggle").classList.add("toggled-on"))});var i="";document.body.addEventListener("focusin",function(e){if(e.target.closest(".menu-item-link a")){var n=e.target.closest(".menu-item-link a");window.addEventListener("keyup",function(e){var t=e.keyCode?e.keyCode:e.which;9!==t&&16!==t||(n.parentElement.classList.add("focus"),null===n.nextElementSibling||n.closest("li").classList.contains("toggled-on")||n.nextElementSibling.click(),i&&(null===i.nextElementSibling||i.closest("li").contains(n)||i.nextElementSibling.click()))},{once:!0})}}),document.body.addEventListener("focusout",function(e){if(e.target.closest(".menu-item-link a")){var o=e.target.closest(".menu-item-link a");window.addEventListener("keyup",function(e){var t=e.keyCode?e.keyCode:e.which;if((console.log(t),9===t||16===t)&&(o.parentElement.classList.remove("focus"),null!==(i=o).closest(".sub-menu"))){console.log("blurred item inside sub-menu");var n=o.closest(".menu-item");null==n.nextElementSibling&&null==n.querySelector(".sub-menu")&&n.parentElement.closest(".menu-item").querySelector(".submenu-dropdown-toggle").click()}},{once:!0})}});var t=document.body,n=document.querySelector(".panel-left-toggle"),e=document.querySelector(".site-top"),o=document.querySelector("#page");function r(e){e.preventDefault(),n.click()}t.classList.contains("app-menu")&&e.append(n),n&&n.addEventListener("afterToggle",function(e){n.classList.contains("toggled-on")?(t.classList.add("body-lock"),document.querySelector(".site-content").addEventListener("click",r,{once:!0})):(document.querySelector(".site-content").removeEventListener("click",r),t.classList.contains("app-menu")?o.addEventListener("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){t.classList.remove("body-lock")},{once:!0}):t.classList.remove("body-lock"))})}),jQuery(function(e){if(e(".logo-in-middle").length){var t=e(".site-navigation__nav-holder .menu li"),n=Math.floor(e(t).length/2)-1;e('<li class="menu-item li-logo-holder"><div class="menu-item-link"></div></li>').insertAfter(t.filter(":eq("+n+")")),e(".site-logo").clone().appendTo(".li-logo-holder")}}),jQuery(function(e){function t(){e(".background-image, .cover-image").each(function(){var t=e(this);!function(e,t){var n;if(!window.HTMLPictureElement)return window.respimage?respimage({elements:[e]}):window.picturefill&&picturefill({elements:[e]}),t(e.src);n=function(){e.removeEventListener("load",n),e.removeEventListener("error",n),t(e.currentSrc)},e.addEventListener("load",n),e.addEventListener("error",n),e.complete&&n()}(t.find("img").get(0),function(e){t.css("background-image","url("+e+")")})})}"objectFit"in document.documentElement.style==!1&&(e("html").addClass("no-objectfit"),e(window).resize(function(){t()}),t())}),document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll('iframe[src*="youtube.com"], iframe[data-src*="youtube.com"], iframe[src*="vimeo.com"], iframe[data-src*="vimeo.com"]').forEach(function(e){e.parentElement.classList.contains("videowrapper")||wrap(e).classList.add("videowrapper")})}),document.addEventListener("DOMContentLoaded",function(){var t=document.querySelector(".header-above");null!==t&&document.querySelectorAll(".entry-header, .page-header").forEach(function(e){t.parentElement.prepend(e),e.classList.add("header-moved")});var e=document.querySelector("#secondary");null!==e&&(e.innerHTML=e.innerHTML.trim(),document.querySelector(".sidebar-template").classList.add("active"))});var scrollEvent=new Event("afterScroll",{bubbles:!0});function scrolltoHash(e){var t=e.dataset.offset||"start";if(isNaN(parseInt(t)))e.scrollIntoView({behavior:"smooth",block:t});else{var n=window.pageYOffset+e.getBoundingClientRect().top+parseInt(t);window.scroll({behavior:"smooth",top:n})}e.dispatchEvent(scrollEvent)}document.addEventListener("DOMContentLoaded",function(){location.hash&&scrolltoHash(document.querySelector(location.hash)),document.body.addEventListener("click",function(e){var t=e.target.closest('a[href^="#"]');if(t){var n=t.getAttribute("href");"#"!==n&&"#0"!==n&&(e.preventDefault(),scrolltoHash(document.querySelector(n)))}})}),document.addEventListener("afterScroll",function(e){});var scrollMagicController="";function runScrollerAttributes(e){if("undefined"!=typeof ScrollMagic&&e.hasAttribute("data-scrollanimation")){var t=e.dataset.scrollanimation,n=e.dataset.scrollhook||"center",o=e.dataset.offset||0,i=e.dataset.scrolltrigger||e,r=e.dataset.duration||0,l=e.dataset.scrollscrub,a=e.dataset.reverse||!0;if(scene="",-1===t.toLowerCase().indexOf("up")&&-1===t.toLowerCase().indexOf("down")||(i===e&&(i=e.parentElement,o=e.offsetTop-i.offsetTop+parseInt(o)),n="onEnter"),"fixed-at-top"===e.getAttribute("data-scrollanimation"))wrap(e,document.createElement("div")).classList.add("fixed-holder"),n="onLeave",i=e.parentElement;void 0!==l?(r=r||100,l=TweenMax.to(e,.65,{className:"+="+t}),scene=new ScrollMagic.Scene({triggerElement:i,offset:o,triggerHook:n,duration:r,reverse:a}).setTween(l).addTo(scrollMagicController)):scene=new ScrollMagic.Scene({triggerElement:i,offset:o,triggerHook:n,duration:r,reverse:a}).on("enter leave",function(){e.classList.toggle(t),e.classList.toggle("active"),"fixed-at-top"===e.getAttribute("data-scrollanimation")&&(e.style.width=e.parentElement.clientWidth+"px",e.style.left=e.parentElement.offsetLeft+"px")}).addTo(scrollMagicController),document.body.classList.add("scrollmagic-loaded")}}document.addEventListener("DOMContentLoaded",function(){"undefined"!=typeof ScrollMagic&&(scrollMagicController=new ScrollMagic.Controller,document.querySelectorAll("[data-scrollanimation]").forEach(function(e){runScrollerAttributes(e)}))});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV2ZW50cy5qcyIsInNldHVwLmpzIiwibmF2aWdhdGlvbi5qcyIsImljb25zLmpzIiwib2JqZWN0Zml0RmFsbGJhY2suanMiLCJyZXNwb25zaXZlLWlmcmFtZS5qcyIsInNpZGViYXIuanMiLCJzbW9vdGgtc2Nyb2xsLmpzIiwic2Nyb2xsbWFnaWMvX3Njcm9sbG1hZ2ljLmpzIl0sIm5hbWVzIjpbImlnblNsaWRlVGltZXIiLCJtZW51QnV0dG9ucyIsInBsYWNlTWVudUJ1dHRvbnMiLCIkc2l0ZVRvcEhlaWdodCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNsaWVudEhlaWdodCIsImxlbmd0aCIsImZvckVhY2giLCJidXR0b24iLCJzdHlsZSIsImhlaWdodCIsImlzSGlnaERlbnNpdHkiLCJ3aW5kb3ciLCJtYXRjaE1lZGlhIiwibWF0Y2hlcyIsImZpbGVFeGlzdHMiLCJpbWFnZV91cmwiLCJodHRwIiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwic2VuZCIsInN0YXR1cyIsImFkZEV2ZW50TGlzdGVuZXIiLCJkb2N1bWVudEVsZW1lbnQiLCJjbGFzc05hbWUiLCJxdWVyeVNlbGVjdG9yQWxsIiwidG9nZ2xlRXZlbnQiLCJ0b2dnbGVJdGVtIiwiaXRlbSIsImZvcmNlZFN0YXRlIiwiYXJndW1lbnRzIiwidW5kZWZpbmVkIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwidG9nZ2xlIiwiaXNUb2dnbGVkIiwiY29udGFpbnMiLCJzZXRBdHRyaWJ1dGUiLCIkY2xhc3MiLCJnZXRBdHRyaWJ1dGUiLCIkdGFyZ2V0IiwidGFyZ2V0SXRlbSIsImRhdGFzZXQiLCJzbGlkZSIsInNsaWRlVGltZSIsInBhcnNlRmxvYXQiLCJpZ25TbGlkZURvd24iLCJpZ25TbGlkZVVwIiwiZGlzcGF0Y2hFdmVudCIsImlzSUUxMSIsImNyZWF0ZUV2ZW50IiwiaW5pdEV2ZW50IiwiRXZlbnQiLCJidWJibGVzIiwiYm9keSIsImUiLCJ0YXJnZXQiLCJjbG9zZXN0IiwicHJldmVudERlZmF1bHQiLCJzdG9wUHJvcGFnYXRpb24iLCJyYWRpb1NlbGVjdG9yIiwiY29uY2F0IiwicmFkaW9JdGVtIiwic3dpdGNoSXRlbSIsIm1vdmVkSWQiLCJtb3ZlSXRlbXMiLCJ3aW5kb3dXaWR0aCIsImlubmVyV2lkdGgiLCJtb3ZlQXQiLCJkZXN0aW5hdGlvbiIsInNvdXJjZSIsInN0YXJ0c1dpdGgiLCJjc3NWYXJzIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsInBhcnNlSW50IiwiZ2V0UHJvcGVydHlWYWx1ZSIsInNvdXJjZUVsZW0iLCJwYXJlbnRFbGVtZW50IiwiaWQiLCJoYXNBdHRyaWJ1dGUiLCJpbnNlcnRCZWZvcmUiLCJjaGlsZHJlbiIsImFwcGVuZENoaWxkIiwiZml4ZWQiLCJmaXJzdEVsZW1lbnRDaGlsZCIsInRocm90dGxlIiwiRXZlbnRGaW5pc2hlZCIsInJldGluYUltYWdlIiwiaW1hZ2UyeCIsImhpZ2hSZXMiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJzbGljZSIsInJlcGxhY2UiLCJmaXhPZmZTY3JlZW5NZW51IiwibWVudSIsImRpc3BsYXkiLCJvcGFjaXR5IiwicmlnaHRFZGdlIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwicmlnaHQiLCJsZWZ0RWRnZSIsImNsaWVudFdpZHRoIiwibGVmdCIsIm9wZW5DbG9zZU1lbnUiLCJtZW51QnV0dG9uIiwibWVudUl0ZW0iLCJzdWJNZW51Iiwib25jZSIsIndyYXAiLCJlbCIsIndyYXBwZXIiLCJjcmVhdGVFbGVtZW50IiwicGFyZW50Tm9kZSIsImRlYm91bmNlIiwiZnVuYyIsIndhaXQiLCJpbW1lZGlhdGUiLCJ0aW1lb3V0IiwiY29udGV4dCIsInRoaXMiLCJhcmdzIiwiY2FsbE5vdyIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJhcHBseSIsImZuIiwidGhyZXNoaG9sZCIsInNjb3BlIiwibGFzdCIsImRlZmVyVGltZXIiLCJub3ciLCJEYXRlIiwiaWduU2xpZGVQcm9wZXJ0eVJlc2V0IiwicmVtb3ZlUHJvcGVydHkiLCJkdXJhdGlvbiIsIm9mZnNldEhlaWdodCIsInRyYW5zaXRpb25Qcm9wZXJ0eSIsInRyYW5zaXRpb25EdXJhdGlvbiIsIm92ZXJmbG93IiwicGFkZGluZ1RvcCIsInBhZGRpbmdCb3R0b20iLCJtYXJnaW5Cb3R0b20iLCJtYXJnaW5Ub3AiLCJwYWRkaW5nIiwibWFyZ2luIiwiaWduU2xpZGVUb2dnbGUiLCJpY29uIiwiaWNvbkNsYXNzIiwiaWNvblN0cmluZyIsImluc2VydEFkamFjZW50SFRNTCIsIm5leHRFbGVtZW50U2libGluZyIsImNsaWNrIiwiZXZ0IiwiZmxleERpcmVjdGlvbiIsImxhc3RUYWJiZWRJdGVtIiwibWVudUl0ZW1MaW5rIiwiY29kZSIsImtleUNvZGUiLCJ3aGljaCIsImNvbnNvbGUiLCJsb2ciLCJtZW51VG9nZ2xlIiwidG9wTmF2IiwicGFnZSIsImNsb3NlQXBwTWVudSIsImFwcGVuZCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJqUXVlcnkiLCIkIiwibmF2aWdhdGlvbkxpIiwibWlkZGxlIiwiTWF0aCIsImZsb29yIiwiaW5zZXJ0QWZ0ZXIiLCJmaWx0ZXIiLCJjbG9uZSIsImFwcGVuZFRvIiwic2V0QmdJbWFnZSIsImVhY2giLCIkdGhpcyIsImVsZW1lbnQiLCJjYiIsImdldFNyYyIsIkhUTUxQaWN0dXJlRWxlbWVudCIsInJlc3BpbWFnZSIsImVsZW1lbnRzIiwicGljdHVyZWZpbGwiLCJzcmMiLCJjdXJyZW50U3JjIiwiY29tcGxldGUiLCJnZXRDdXJyZW50U3JjIiwiZmluZCIsImdldCIsImVsZW1lbnRTb3VyY2UiLCJjc3MiLCJhZGRDbGFzcyIsInJlc2l6ZSIsImlmcmFtZSIsImhlYWRlckFib3ZlIiwiaGVhZGVyIiwicHJlcGVuZCIsInNpZGViYXIiLCJpbm5lckhUTUwiLCJ0cmltIiwic2Nyb2xsRXZlbnQiLCJzY3JvbGx0b0hhc2giLCJvZmZzZXQiLCJpc05hTiIsInNjcm9sbEludG9WaWV3IiwiYmVoYXZpb3IiLCJibG9jayIsImZyb21Ub3AiLCJwYWdlWU9mZnNldCIsInRvcCIsInNjcm9sbCIsImxvY2F0aW9uIiwiaGFzaCIsIml0ZW1IYXNoIiwic2Nyb2xsTWFnaWNDb250cm9sbGVyIiwicnVuU2Nyb2xsZXJBdHRyaWJ1dGVzIiwiU2Nyb2xsTWFnaWMiLCJhbmltYXRpb25DbGFzcyIsInNjcm9sbGFuaW1hdGlvbiIsInRyaWdnZXJIb29rIiwic2Nyb2xsaG9vayIsInRyaWdnZXJFbGVtZW50Iiwic2Nyb2xsdHJpZ2dlciIsInR3ZWVuIiwic2Nyb2xsc2NydWIiLCJyZXZlcnNlIiwic2NlbmUiLCJ0b0xvd2VyQ2FzZSIsImluZGV4T2YiLCJvZmZzZXRUb3AiLCJUd2Vlbk1heCIsInRvIiwiU2NlbmUiLCJzZXRUd2VlbiIsImFkZFRvIiwib24iLCJ3aWR0aCIsIm9mZnNldExlZnQiLCJDb250cm9sbGVyIl0sIm1hcHBpbmdzIjoiYUFVQSxJQzZDSUEsY0Q3Q0FDLFlBQWMsR0FFbEIsU0FBU0MsbUJBQ1IsSUFBSUMsRUFBaUJDLFNBQVNDLGNBQWMsYUFFdkIsTUFBbEJGLElBQ0ZBLEVBQWlCQSxFQUFlRyxjQVU3QkwsWUFBWU0sUUFDZk4sWUFBWU8sUUFBUSxTQUFBQyxHQUNuQkEsRUFBT0MsTUFBTUMsT0FBU1IsRUFBaUIsT0FzUjFDLFNBQVNTLGdCQUNSLE9BQVNDLE9BQU9DLFlBQWVELE9BQU9DLFdBQVcsaUVBQWlFQyxRQUluSCxTQUFTQyxXQUFXQyxHQUNuQixJQUFJQyxFQUFPLElBQUlDLGVBR2YsT0FGQUQsRUFBS0UsS0FBSyxPQUFRSCxHQUFXLEdBQzdCQyxFQUFLRyxPQUNpQixLQUFmSCxFQUFLSSxPQUtiLEdBM1JBbEIsU0FBU21CLGlCQUFpQixtQkFBb0IsV0FHdkMsaUJBQWtCbkIsU0FBU29CLGdCQUdoQ3BCLFNBQVNvQixnQkFBZ0JDLFdBQWEsZ0JBRnRDckIsU0FBU29CLGdCQUFnQkMsV0FBYSxtQkFXdEN4QixZQUpJRyxTQUFTQyxjQUFjLGFBSWJELFNBQVNzQixpQkFBaUIsdUJBSDFCdEIsU0FBU3NCLGlCQUFpQiwyQ0FZekMsSUFBSUMsRUFBYyxL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LFNBQVNtQixpQkFBaUIsbUJBQW9CLFdBRXpDLG9CQUFzQnVNLGNBQ3pCRixzQkFBd0IsSUFBSUUsWUFBWXNCLFdBQ3hDaFAsU0FBU3NCLGlCQUFpQiwwQkFBMEJsQixRQUFRLFNBQUM4SyxHQUM1RHVDLHNCQUFzQnZDIiwiZmlsZSI6ImN1c3RvbS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4jIEFkZGluZyBzb21lIGdsb2JhbCBldmVudHMgYW5kIGZ1bmN0aW9ucyB1c2VycyBjYW4gdXNlIHZpYSBkYXRhIGF0dHJpYnV0ZXNcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuLyoqXG4gKiByZXNpemUgbWVudSBidXR0b25zIG9uIGxvYWQuIGFsc28gcnVucyBvbiByZXNpemUuXG4gKiBtZW51IGJ1dHRvbiBpcyBub3QgaW5zaWRlIHNpdGUtdG9wIGZvciB2YXJpb3VzIHJlYXNvbnMgKHdlIGRvbnQgd2FudCB4IHRvIGJlIGluc2lkZSBvciB3aGVuIG1lbnUgb3BlbnMgdGhlIGV4IGlzIHVpbmRlcm5lYXRoLlxuICogc28gd2UgdXNlIHRoaXMgZnVuY3Rpb24gdG8gbWF0Y2ggdGhlIHNpdGUgLXRvcCBoZWlnaHQgYW5kIGNlbnRlciBpdCBhcyBpZiBpdCB3YXMgaW5zaWRlXG4gKi9cblxubGV0IG1lbnVCdXR0b25zID0gJyc7XG5cbmZ1bmN0aW9uIHBsYWNlTWVudUJ1dHRvbnMoKSB7XG5cdGxldCAkc2l0ZVRvcEhlaWdodCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zaXRlLXRvcCcpO1xuXG5cdGlmKCRzaXRlVG9wSGVpZ2h0ICE9IG51bGwpe1xuXHRcdCRzaXRlVG9wSGVpZ2h0ID0gJHNpdGVUb3BIZWlnaHQuY2xpZW50SGVpZ2h0O1xuXHR9XG5cblx0Ly8gbGV0IGFkbWluYmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3dwYWRtaW5iYXInKTtcblx0Ly8gbGV0IGFkbWluYmFySGVpZ2h0ID0gMDtcblx0Ly9cblx0Ly8gaWYgKGFkbWluYmFyICE9PSBudWxsKSB7XG5cdC8vIFx0YWRtaW5iYXJIZWlnaHQgPSBhZG1pbmJhci5jbGllbnRIZWlnaHQ7XG5cdC8vIH1cblxuXHRpZiAobWVudUJ1dHRvbnMubGVuZ3RoKSB7XG5cdFx0bWVudUJ1dHRvbnMuZm9yRWFjaChidXR0b24gPT4ge1xuXHRcdFx0YnV0dG9uLnN0eWxlLmhlaWdodCA9ICRzaXRlVG9wSGVpZ2h0ICsgJ3B4Jztcblx0XHR9KTtcblx0fVxufVxuXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4jIElHTiBFdmVudHNcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcblxuXHQvKi0tLS0tLS0gQWRkIHRvdWNoIGNsYXNzZXMgb3Igbm90IC0tLS0tLS0tKi9cblx0aWYgKCEoXCJvbnRvdWNoc3RhcnRcIiBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpKSB7XG5cdFx0ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTmFtZSArPSBcIiBuby10b3VjaC1kZXZpY2VcIjtcblx0fSBlbHNlIHtcblx0XHRkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NOYW1lICs9IFwiIHRvdWNoLWRldmljZVwiO1xuXHR9XG5cblx0LyotLS0tLS0tIG1lbnUgYnV0dG9ucyAtLS0tLS0tLSovXG5cdC8vaWYgdGhlIG1lbnUgYnV0dG9uIGlzIG91dHNpZGUgc2l0ZS10b3AuIGdldCBib3RoIGJ1dHRvbnMgZm9yIGNlbnRlcmluZyBib3RoLlxuXHRpZiAoIWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hcHAtbWVudScpKSB7XG5cdFx0bWVudUJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucGFuZWwtbGVmdC10b2dnbGUsIC5wYW5lbC1yaWdodC10b2dnbGUnKTtcblx0fSBlbHNlIHtcblx0XHQvL290aGVyd2lzZSB0aGUgbWVudSBidXR0b24gZG9lcyBub3QgbmVlZCB0byBiZSBjZW50ZXJlZCBiZWNhdXNlIGl0cyBwYXJ0IG9mIHRoZSBhcHAgbWVudSBhbmQgbW92ZXMuIChtb3ZlZCBpbiBuYXZpZ2F0aW9uLmpzKVxuXHRcdG1lbnVCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBhbmVsLXJpZ2h0LXRvZ2dsZScpO1xuXHR9XG5cdC8vd2UgcnVuIG1lbnUgYnV0dG9uIGZ1bmN0aW9uIGJlbG93IGluIHJlc2l6ZSBldmVudFxuXG5cblx0LyotLS0tLS0tIFRvZ2dsZSBCdXR0b25zIC0tLS0tLS0tKi9cblxuXHQvL3RyaWdnZXIgb3B0aW9uYWwgYWZ0ZXJUb2dnbGUgZXZlbnRcblx0Ly9hZGRpbmcgbmV3IGN1c3RvbSBldmVudCBmb3IgYWZ0ZXIgdGhlIGVsZW1lbnQgaXMgdG9nZ2xlZFxuXHRsZXQgdG9nZ2xlRXZlbnQgPSBudWxsO1xuXHRpZiAoaXNJRTExKSB7XG5cdFx0dG9nZ2xlRXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnRXZlbnQnKTtcblxuXHRcdC8vIERlZmluZSB0aGF0IHRoZSBldmVudCBuYW1lIGlzICdidWlsZCcuXG5cdFx0dG9nZ2xlRXZlbnQuaW5pdEV2ZW50KCdhZnRlclRvZ2dsZScsIHRydWUsIHRydWUpO1xuXG5cdH0gZWxzZSB7XG5cdFx0dG9nZ2xlRXZlbnQgPSBuZXcgRXZlbnQoJ2FmdGVyVG9nZ2xlJywge2J1YmJsZXM6IHRydWV9KTsgLy9idWJibGUgYWxsb3dzIGZvciBkZWxlZ2F0aW9uIG9uIGJvZHlcblx0fVxuXG5cblx0Ly9hZGQgYXJpYSB0byBidXR0b25zIGN1cnJlbnRseSBvbiBwYWdlXG5cdGxldCBidXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtdG9nZ2xlXScpO1xuXHRidXR0b25zLmZvckVhY2goYnV0dG9uID0+IHtcblx0XHRidXR0b24uc2V0QXR0cmlidXRlKCdyb2xlJywgJ3N3aXRjaCcpO1xuXHRcdGJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2FyaWEtY2hlY2tlZCcsIGJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoJ3RvZ2dsZWQtb24nKSA/ICd0cnVlJyA6ICdmYWxzZScpO1xuXG5cdH0pO1xuXG5cblx0Ly90b2dnbGluZyB0aGUgYnV0dG9ucyB3aXRoIGRlbGVnYXRpb24gY2xpY2tcblx0ZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuXG5cdFx0bGV0IGl0ZW0gPSBlLnRhcmdldC5jbG9zZXN0KCdbZGF0YS10b2dnbGVdJyk7XG5cblx0XHRpZiAoaXRlbSkge1xuXG5cdFx0XHRsZXQgJGRvRGVmYXVsdCA9IGl0ZW0uZ2V0QXR0cmlidXRlKCdkYXRhLWRlZmF1bHQnKTtcblx0XHRcdC8vbm9ybWFsbHkgd2UgcHJldmVudCBkZWZhdWx0IHVubGVzcyBzb21lb25lIGFkZCBkYXRhLWRlZmF1bHRcblx0XHRcdGlmIChudWxsID09PSAkZG9EZWZhdWx0KSB7XG5cdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdH1cblxuXHRcdFx0Ly9pZiBkYXRhLXJhZGlvIGlzIGZvdW5kLCBvbmx5IG9uZSBjYW4gYmUgc2VsZWN0ZWQgYXQgYSB0aW1lLlxuXHRcdFx0Ly8gdW50b2dnbGVzIGFueSBvdGhlciBpdGVtIHdpdGggc2FtZSByYWRpbyB2YWx1ZVxuXHRcdFx0Ly9yYWRpbyBpdGVtcyBjYW5ub3QgYmUgdW50b2dnbGVkIHVudGlsIGFub3RoZXIgaXRlbSBpcyBjbGlja2VkXG5cdFx0XHRsZXQgcmFkaW9TZWxlY3RvciA9IGl0ZW0uZ2V0QXR0cmlidXRlKCdkYXRhLXJhZGlvJyk7XG5cblxuXHRcdFx0aWYgKHJhZGlvU2VsZWN0b3IgIT09IG51bGwpIHtcblx0XHRcdFx0bGV0IHJhZGlvU2VsZWN0b3JzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgW2RhdGEtcmFkaW89XCIke3JhZGlvU2VsZWN0b3J9XCJdYCk7XG5cblx0XHRcdFx0cmFkaW9TZWxlY3RvcnMuZm9yRWFjaChyYWRpb0l0ZW0gPT4ge1xuXHRcdFx0XHRcdGlmIChyYWRpb0l0ZW0gIT09IGl0ZW0gJiYgcmFkaW9JdGVtLmNsYXNzTGlzdC5jb250YWlucygndG9nZ2xlZC1vbicpKSB7XG5cdFx0XHRcdFx0XHR0b2dnbGVJdGVtKHJhZGlvSXRlbSk7IC8vdG9nZ2xlIGFsbCBvdGhlciByYWRpbyBpdGVtcyBvZmYgd2hlbiB0aGlzIG9uZSBpcyBiZWluZyB0dXJuZWQgb25cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXG5cdFx0XHQvL2lmIGl0ZW0gaGFzIGRhdGEtc3dpdGNoIGl0IGNhbiBvbmx5IGJlIHR1cm5lZCBvbiBvciBvZmYgYnV0IG5vdCBib3RoIGJ5IHRoaXMgYnV0dG9uIGJhc2VkIG9uIHZhbHVlIG9mIGRhdGEtc3dpdGNoIChpdHMgZWl0aGVyIG9uIG9yIG9mZilcblx0XHRcdGxldCBzd2l0Y2hJdGVtID0gaXRlbS5nZXRBdHRyaWJ1dGUoJ2RhdGEtc3dpdGNoJyk7XG5cblx0XHRcdC8vZmluYWxseSB0b2dnbGUgdGhlIGNsaWNrZWQgaXRlbS4gc29tZSB0eXBlcyBvZiBpdGVtcyBjYW5ub3QgYmUgdW50b2dnbGVkIGxpa2UgcmFkaW8gb3IgYW4gb24gc3dpdGNoXG5cdFx0XHRpZiAocmFkaW9TZWxlY3RvciAhPT0gbnVsbCkge1xuXHRcdFx0XHR0b2dnbGVJdGVtKGl0ZW0sICdvbicpOyAvL3RoZSBpdGVtIGNsaWNrZWQgb24gY2Fubm90IGJlIHVuY2xpY2tlZCB1bnRpbCBhbm90aGVyIGl0ZW0gaXMgcHJlc3NlZFxuXHRcdFx0fSBlbHNlIGlmIChzd2l0Y2hJdGVtICE9PSBudWxsKSB7XG5cdFx0XHRcdGlmIChzd2l0Y2hJdGVtID09PSAnb24nKSB7XG5cdFx0XHRcdFx0dG9nZ2xlSXRlbShpdGVtLCAnb24nKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR0b2dnbGVJdGVtKGl0ZW0sICdvZmYnKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dG9nZ2xlSXRlbShpdGVtKTsgLy9ub3JtYWwgcmVndWxhciB0b2dnbGUgY2FuIHR1cm4gaXRzZWxmIG9uIG9yIG9mZlxuXHRcdFx0fVxuXG5cdFx0fSAvL2VuZCBpZiBpdGVtIGZvdW5kXG5cdH0pO1xuXG5cdC8vYWN0dWFsIHRvZ2dsZSBvZiBhbiBpdGVtIGFuZCBhZGQgY2xhc3MgdG9nZ2xlZC1vbiBhbmQgYW55IG90aGVyIGNsYXNzZXMgbmVlZGVkLiBBbHNvIGRvIGEgc2xpZGUgaWYgbmVjZXNzYXJ5XG5cdGZ1bmN0aW9uIHRvZ2dsZUl0ZW0oaXRlbSwgZm9yY2VkU3RhdGUgPSAnbm9uZScpIHtcblxuXHRcdC8vdG9nZ2xlIGl0ZW1cblx0XHRpZiAoZm9yY2VkU3RhdGUgPT09ICdvbicpIHtcblx0XHRcdGl0ZW0uY2xhc3NMaXN0LmFkZCgndG9nZ2xlZC1vbicpOyAvL3JhZGlvIG9yIGRhdGEtc3dpdGNoIG9mIG9uIHdpbGwgYWx3YXlzIHRvZ2dsZS1vblxuXHRcdH0gZWxzZSBpZiAoZm9yY2VkU3RhdGUgPT09ICdvZmYnKSB7XG5cdFx0XHRpdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ3RvZ2dsZWQtb24nKTsgLy9kYXRhLXN3aXRjaCBvZiBvZmYgd2lsbCBhbHdheXMgdG9nZ2xlIG9mZlxuXHRcdH0gZWxzZSB7XG5cdFx0XHRpdGVtLmNsYXNzTGlzdC50b2dnbGUoJ3RvZ2dsZWQtb24nKTsgLy9iYXNpYyBkYXRhIHRvZ2dsZSBpdGVtXG5cdFx0fVxuXG5cdFx0Ly9pcyBpdGVtIHRvZ2dsZWQ/IHVzZWQgZm9yIHRoZSByZXN0IG9mIHRoaXMgZnVuY3Rpb24gdG8gdG9nZ2xlIGFub3RoZXIgdGFyZ2V0IGlmIG5lZWRlZC5cblx0XHRsZXQgaXNUb2dnbGVkID0gaXRlbS5jbGFzc0xpc3QuY29udGFpbnMoJ3RvZ2dsZWQtb24nKTtcblxuXHRcdGl0ZW0uc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgaXNUb2dnbGVkID8gJ3RydWUnIDogJ2ZhbHNlJyk7XG5cblx0XHQvL2dldCBjbGFzcyB0byBhZGQgdG8gdGhpcyBpdGVtIG9yIGFub3RoZXJcblx0XHRsZXQgJGNsYXNzID0gaXRlbS5nZXRBdHRyaWJ1dGUoJ2RhdGEtdG9nZ2xlJyksXG5cdFx0XHQkdGFyZ2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChpdGVtLmdldEF0dHJpYnV0ZSgnZGF0YS10YXJnZXQnKSk7XG5cblx0XHRpZiAoJGNsYXNzID09PSBudWxsIHx8ICEkY2xhc3MpIHtcblx0XHRcdCRjbGFzcyA9ICd0b2dnbGVkLW9uJzsgLy9kZWZhdWx0IGNsYXNzIGFkZGVkIGlzIHRvZ2dsZWQtb25cblx0XHR9XG5cdFx0Ly9zcGVjaWFsIGNsYXNzIGFkZGVkIHRvIGFub3RoZXIgaXRlbVxuXHRcdGlmICgkdGFyZ2V0Lmxlbmd0aCkge1xuXHRcdFx0JHRhcmdldC5mb3JFYWNoKHRhcmdldEl0ZW0gPT4ge1xuXHRcdFx0XHRpZiAoaXNUb2dnbGVkKSB7XG5cdFx0XHRcdFx0dGFyZ2V0SXRlbS5jbGFzc0xpc3QuYWRkKCRjbGFzcyk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dGFyZ2V0SXRlbS5jbGFzc0xpc3QucmVtb3ZlKCRjbGFzcyk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHR0YXJnZXRJdGVtLnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsIGlzVG9nZ2xlZCA/ICd0cnVlJyA6ICdmYWxzZScpO1xuXG5cdFx0XHRcdC8vZGF0YSBzbGlkZSBvcGVuIG9yIGNsb3NlZFxuXHRcdFx0XHRpZiAodGFyZ2V0SXRlbS5kYXRhc2V0LnNsaWRlICE9PSB1bmRlZmluZWQpIHtcblxuXHRcdFx0XHRcdGxldCBzbGlkZVRpbWUgPSAodGFyZ2V0SXRlbS5kYXRhc2V0LnNsaWRlKSA/IHBhcnNlRmxvYXQodGFyZ2V0SXRlbS5kYXRhc2V0LnNsaWRlKSA6IC41O1xuXG5cdFx0XHRcdFx0aWYgKGlzVG9nZ2xlZCkge1xuXHRcdFx0XHRcdFx0aWduU2xpZGVEb3duKHRhcmdldEl0ZW0sIHNsaWRlVGltZSk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGlnblNsaWRlVXAodGFyZ2V0SXRlbSwgc2xpZGVUaW1lKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvL2FsbG93IGV2ZW50IHRvIGhhcHBlbiBhZnRlciBjbGljayBmb3IgdGhlIHRhcmdldGVkIGl0ZW1cblx0XHRcdFx0dGFyZ2V0SXRlbS5kaXNwYXRjaEV2ZW50KHRvZ2dsZUV2ZW50KTtcblx0XHRcdH0pO1xuXHRcdH0gZWxzZSB7IC8vYXBwbGllcyBjbGFzcyB0byB0aGUgY2xpY2tlZCBpdGVtLCB0aGVyZSBpcyBubyB0YXJnZXRcblx0XHRcdGlmICgkY2xhc3MgIT09ICd0b2dnbGVkLW9uJykgeyAvL2FkZCBjbGFzcyB0byBjbGlja2VkIGl0ZW0gaWYgaXRzIG5vdCBzZXQgdG8gYmUgdG9nZ2xlZC1vblxuXHRcdFx0XHRpZiAoaXNUb2dnbGVkKSB7XG5cdFx0XHRcdFx0aXRlbS5jbGFzc0xpc3QudG9nZ2xlKCRjbGFzcyk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0aXRlbS5jbGFzc0xpc3QucmVtb3ZlKCRjbGFzcyk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHQvL3RyaWdnZXIgb3B0aW9uYWwgYWZ0ZXJUb2dnbGUgZXZlbnQuIGNvbnRpbnVlIHRoZSBjbGljayBldmVudCBmb3IgY3VzdG9taXplZCBzdHVmZlxuXHRcdGl0ZW0uZGlzcGF0Y2hFdmVudCh0b2dnbGVFdmVudCk7XG5cblx0fVxuXG5cblx0LyotLS0tLS0tIE1vdmluZyBpdGVtcyBFdmVudCBhcyB3ZWxsIGFzIGFsbCByZXNpemluZyAtLS0tLS0tLSovXG5cdC8vb24gV2luZG93IHJlc2l6ZSB3ZSBjYW4gbW92ZSBpdGVtcyB0byBhbmQgZnJvbSBkaXZzIHdpdGggZGF0YS1tb3ZldG89XCJ0aGUgZGVzdGluYXRpb25cIlxuXHQvL2l0IHdpbGwgbW92ZSB0aGVyZSB3aGVuIHRoZSBzaXRlIHJlYWNoZXMgc21hbGxlciB0aGFuIGEgc2l6ZSBkZWZhdWx0ZWQgdG8gMTAzMCBvciBzZXQgdGhhdCB3aXRoIGRhdGEtbW92ZWF0XG5cdC8vdGhlIHdob2xlIGRpdiwgaW5jbHVkaW5nIHRoZSBkYXRhIGF0dCBtb3ZldG8gbW92ZXMgYmFjayBhbmQgZm9ydGhcblx0bGV0IG1vdmVkSWQgPSAwO1xuXG5cdGZ1bmN0aW9uIG1vdmVJdGVtcygpIHtcblxuXG5cdFx0bGV0IHdpbmRvd1dpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG5cdFx0bGV0ICRtb3ZlSXRlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1tb3ZldG9dJyk7XG5cblx0XHQkbW92ZUl0ZW1zLmZvckVhY2goaXRlbSA9PiB7XG5cdFx0XHRsZXQgbW92ZUF0ID0gaXRlbS5nZXRBdHRyaWJ1dGUoJ2RhdGEtbW92ZWF0JyksXG5cdFx0XHRcdGRlc3RpbmF0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihpdGVtLmdldEF0dHJpYnV0ZSgnZGF0YS1tb3ZldG8nKSksXG5cdFx0XHRcdHNvdXJjZSA9IGl0ZW0uZ2V0QXR0cmlidXRlKCdkYXRhLW1vdmVmcm9tJyk7XG5cblx0XHRcdG1vdmVBdCA9IG1vdmVBdCA/IG1vdmVBdCA6IDEwMzA7XG5cblx0XHRcdGlmIChtb3ZlQXQuc3RhcnRzV2l0aCgnLS0nKSkge1xuXHRcdFx0XHRpZiAoaXNJRTExKSB7XG5cdFx0XHRcdFx0bW92ZUF0ID0gMTAzMDtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRsZXQgY3NzVmFycyA9IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSk7IC8vZ2V0IGNzcyB2YXJpYWJsZXNcblx0XHRcdFx0XHRtb3ZlQXQgPSBwYXJzZUludChjc3NWYXJzLmdldFByb3BlcnR5VmFsdWUobW92ZUF0KSwgMTApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblxuXHRcdFx0aWYgKCFkZXN0aW5hdGlvbikge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdC8vaWYgbm8gZGF0YSBtb3ZlZnJvbSBpcyBmb3VuZCBhZGQgb25lIHRvIHBhcmVudCBzbyB3ZSBjYW4gbW92ZSBpdGVtcyBiYWNrIGluLiBub3cgdGhleSBnbyBiYWNrIGFuZCBmb3J0aFxuXHRcdFx0aWYgKCFzb3VyY2UpIHtcblx0XHRcdFx0bGV0IHNvdXJjZUVsZW0gPSBpdGVtLnBhcmVudEVsZW1lbnQuaWQ7XG5cblx0XHRcdFx0Ly9pZiBwYXJlbnQgaGFzIG5vIGlkIGF0dHIsIGFkZCBvbmUgd2l0aCBhIG51bWJlciBzbyBpdHMgdW5pcXVlXG5cdFx0XHRcdGlmICghc291cmNlRWxlbSkge1xuXHRcdFx0XHRcdGl0ZW0ucGFyZW50RWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ21vdmUtJyArIG1vdmVkSWQpO1xuXHRcdFx0XHRcdG1vdmVkSWQrKztcblx0XHRcdFx0XHRzb3VyY2VFbGVtID0gaXRlbS5wYXJlbnRFbGVtZW50LmlkO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aXRlbS5zZXRBdHRyaWJ1dGUoJ2RhdGEtbW92ZWZyb20nLCAnIycgKyBzb3VyY2VFbGVtKTtcblx0XHRcdH1cblxuXHRcdFx0c291cmNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihpdGVtLmdldEF0dHJpYnV0ZSgnZGF0YS1tb3ZlZnJvbScpKTtcblxuXHRcdFx0Ly9pZiB0aGUgc2NyZWVuIGlzIHNtYWxsZXIgdGhhbiBtb3ZlQXQgKDEwMzApLCBtb3ZlIHRvIGRlc3RpbmF0aW9uXG5cdFx0XHRpZiAod2luZG93V2lkdGggPCBtb3ZlQXQgfHwgbW92ZUF0ID09IDApIHtcblx0XHRcdFx0Ly9ubyBuZWVkIHRvIG1vdmUgaWYgaXRzIGFscmVhZHkgdGhlcmUuLi5cblx0XHRcdFx0aWYgKCFkZXN0aW5hdGlvbi5jb250YWlucyhpdGVtKSkge1xuXHRcdFx0XHRcdGlmIChpdGVtLmhhc0F0dHJpYnV0ZSgnZGF0YS1tb3ZldG8tcG9zJykpIHtcblx0XHRcdFx0XHRcdGRlc3RpbmF0aW9uLmluc2VydEJlZm9yZShpdGVtLCBkZXN0aW5hdGlvbi5jaGlsZHJlbltpdGVtLmdldEF0dHJpYnV0ZSgnZGF0YS1tb3ZldG8tcG9zJyldKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0ZGVzdGluYXRpb24uYXBwZW5kQ2hpbGQoaXRlbSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpZiAoIXNvdXJjZS5jb250YWlucyhpdGVtKSkge1xuXHRcdFx0XHRcdGlmIChpdGVtLmhhc0F0dHJpYnV0ZSgnZGF0YS1tb3ZlZnJvbS1wb3MnKSkge1xuXHRcdFx0XHRcdFx0c291cmNlLmluc2VydEJlZm9yZShpdGVtLCBzb3VyY2UuY2hpbGRyZW5baXRlbS5nZXRBdHRyaWJ1dGUoJ2RhdGEtbW92ZWZyb20tcG9zJyldKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0c291cmNlLmFwcGVuZENoaWxkKGl0ZW0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvL3Nob3cgaXRcblx0XHRcdGl0ZW0uY2xhc3NMaXN0LmFkZCgndmlzaWJsZScpO1xuXHRcdH0pO1xuXG5cdFx0cGxhY2VNZW51QnV0dG9ucygpOyAvL3J1bm5pbmcgdGhlIG1vdmluZyBvZiBtZW51IGJ1dHRvbnMgaGVyZS4gbm90aGluZyB0byBkbyB3aXRoIG1vdmluZyBpdGVtcy5cblxuXHRcdC8vZml4IGhlaWdodCBvZiBmaXhlZCBob2xkZXIgZml4ZWQgYXQgdG9wIGl0ZW1zXG5cdFx0ZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmZpeGVkLWhvbGRlcicpLmZvckVhY2goZml4ZWQ9Pntcblx0XHRcdGZpeGVkLnN0eWxlLmhlaWdodCA9IGZpeGVkLmZpcnN0RWxlbWVudENoaWxkLmNsaWVudEhlaWdodCArICdweCc7XG5cdFx0fSk7XG5cblx0fVxuXG5cdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aHJvdHRsZShtb3ZlSXRlbXMsIDI1MCkpO1xuXHRtb3ZlSXRlbXMoKTtcblxuXG5cblxuXHRkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnZG9tLWxvYWRpbmcnKTtcblxuXG5cdC8vYWRkIGZpbmlzaGVkIGxvYWRpbmcgRnVtcCBldmVudHNcblx0bGV0IEV2ZW50RmluaXNoZWQgPSBudWxsO1xuXHRpZiAoaXNJRTExKSB7XG5cdFx0RXZlbnRGaW5pc2hlZCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdFdmVudCcpO1xuXG5cdFx0Ly8gRGVmaW5lIHRoYXQgdGhlIGV2ZW50IG5hbWUgaXMgJ2J1aWxkJy5cblx0XHRFdmVudEZpbmlzaGVkLmluaXRFdmVudCgnYWZ0ZXJJZ25FdmVudHMnLCB0cnVlLCB0cnVlKTtcblxuXHR9IGVsc2Uge1xuXHRcdEV2ZW50RmluaXNoZWQgPSBuZXcgRXZlbnQoJ2FmdGVySWduRXZlbnRzJyk7XG5cdH1cblx0ZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChFdmVudEZpbmlzaGVkKTtcbn0pO1xuXG5cbi8qLS0tLS0tLSBGdW5jdGlvbiBmb3IgaGkgcmVkIGJhY2tncm91bmQgaW1hZ2Ugc3dhcCAtLS0tLS0tLSovXG5cbi8vY2hlY2sgaWYgZGV2aWNlIGlzIHJldGluYVxuZnVuY3Rpb24gaXNIaWdoRGVuc2l0eSgpIHtcblx0cmV0dXJuICgod2luZG93Lm1hdGNoTWVkaWEgJiYgKHdpbmRvdy5tYXRjaE1lZGlhKCcoLXdlYmtpdC1taW4tZGV2aWNlLXBpeGVsLXJhdGlvOiAyKSwgKG1pbi1yZXNvbHV0aW9uOiAxOTJkcGkpJykubWF0Y2hlcykpKTtcbn1cblxuLy9jaGVjayBpZiBmaWxlIGV4aXN0cyBvbiBzZXJ2ZXIgYmVmb3JlIHVzaW5nXG5mdW5jdGlvbiBmaWxlRXhpc3RzKGltYWdlX3VybCkge1xuXHRsZXQgaHR0cCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXHRodHRwLm9wZW4oJ0hFQUQnLCBpbWFnZV91cmwsIHRydWUpO1xuXHRodHRwLnNlbmQoKTtcblx0cmV0dXJuIGh0dHAuc3RhdHVzICE9IDQwNDtcbn1cblxuXG4vL0FkZCBpbmxpbmUgcmV0aW5hIGltYWdlIGlmIGZvdW5kIGFuZCBvbiByZXRpbmEgZGV2aWNlLiBUbyB1c2UgYWRkIGRhdGEtaGlnaC1yZXMgdG8gYW4gaW5saW5lIGVsZW1lbnQgd2l0aCBhIGJhY2tncm91bmQtaW1hZ2VcbmlmIChpc0hpZ2hEZW5zaXR5KCkpIHtcblxuXHRsZXQgcmV0aW5hSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1oaWdoLXJlc10nKTtcblx0cmV0aW5hSW1hZ2UuZm9yRWFjaChpdGVtID0+IHtcblx0XHRsZXQgaW1hZ2UyeCA9ICcnO1xuXHRcdC8vaWYgYSBoaWdoIHJlcyBpcyBwcm92aWRlZCB1c2UgdGhhdCwgZWxzZSB1c2UgYmFja2dyb3VuZCBpbWFnZSBidXQgYWRkIDJ4IGF0IGVuZC5cblx0XHRpZiAoaXRlbS5kYXRhc2V0LmhpZ2hSZXMpIHtcblx0XHRcdGltYWdlMnggPSBpdGVtLmRhdGFzZXQuaGlnaFJlcztcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly9nZXQgdXJsIGZvciBvcmlnaW5hbCBpbWFnZVxuXHRcdFx0bGV0IGltYWdlID0gaXRlbS5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2Uuc2xpY2UoNCwgLTEpLnJlcGxhY2UoL1wiL2csIFwiXCIpO1xuXHRcdFx0Ly9hZGQgQDJ4IHRvIGl0IGlmIGltYWdlIGV4aXN0cy5cblx0XHRcdGltYWdlMnggPSBpbWFnZS5yZXBsYWNlKC8oXFwuW14uXSskKS8sICdAMngkMScpO1xuXHRcdH1cblxuXHRcdGlmIChmaWxlRXhpc3RzKGltYWdlMngpKSB7XG5cdFx0XHRpdGVtLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9ICd1cmwoXCInICsgaW1hZ2UyeCArICdcIiknO1xuXHRcdH1cblxuXHR9KTtcbn1cblxuXG4iLCIvKi0tLS0tLS0gQ29yZSBGdW5jdGlvbnMgLS0tLS0tLS0qL1xuXG4vL3dyYXAgZnVuY3Rpb25cbmZ1bmN0aW9uIHdyYXAoZWwsIHdyYXBwZXIpIHtcblx0aWYgKHdyYXBwZXIgPT09IHVuZGVmaW5lZCkge1xuXHRcdHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0fVxuXHRlbC5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh3cmFwcGVyLCBlbCk7XG5cdHdyYXBwZXIuYXBwZW5kQ2hpbGQoZWwpO1xuXHRyZXR1cm4gd3JhcHBlcjtcbn1cblxuLy9kZWJvdW5jZSB0byBzbG93IGRvd24gYW4gZXZlbnQgdGhhdCB1c2VycyB3aW5kb3cgc2l6ZSBvciB0aGUgbGlrZVxuLy9kZWJvdW5jZSB3aWxsIHdhaXQgdGlsbCB0aGUgd2luZG93IGlzIHJlc2l6ZWQgYW5kIHRoZW4gcnVuXG5mdW5jdGlvbiBkZWJvdW5jZShmdW5jLCB3YWl0LCBpbW1lZGlhdGUpIHtcblx0dmFyIHRpbWVvdXQ7XG5cdHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdFx0dmFyIGNvbnRleHQgPSB0aGlzLCBhcmdzID0gYXJndW1lbnRzO1xuXHRcdHZhciBsYXRlciA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdHRpbWVvdXQgPSBudWxsO1xuXHRcdFx0aWYgKCFpbW1lZGlhdGUpIGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG5cdFx0fTtcblx0XHR2YXIgY2FsbE5vdyA9IGltbWVkaWF0ZSAmJiAhdGltZW91dDtcblx0XHRjbGVhclRpbWVvdXQodGltZW91dCk7XG5cdFx0dGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQpO1xuXHRcdGlmIChjYWxsTm93KSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuXHR9O1xufVxuXG4vL3Rocm90dGxlIHdpbGwgcnVuIGV2ZXJ5IGZldyBtaWxsaXNlY29uZHMgYXMgb3Bwb3NlZCB0byBldmVyeSBtaWxsaXNlY29uZFxuZnVuY3Rpb24gdGhyb3R0bGUoZm4sIHRocmVzaGhvbGQsIHNjb3BlKSB7XG5cdHRocmVzaGhvbGQgfHwgKHRocmVzaGhvbGQgPSAyNTApO1xuXHR2YXIgbGFzdCxcblx0XHRkZWZlclRpbWVyO1xuXHRyZXR1cm4gZnVuY3Rpb24gKCkge1xuXHRcdHZhciBjb250ZXh0ID0gc2NvcGUgfHwgdGhpcztcblxuXHRcdHZhciBub3cgPSArbmV3IERhdGUsXG5cdFx0XHRhcmdzID0gYXJndW1lbnRzO1xuXHRcdGlmIChsYXN0ICYmIG5vdyA8IGxhc3QgKyB0aHJlc2hob2xkKSB7XG5cdFx0XHQvLyBob2xkIG9uIHRvIGl0XG5cdFx0XHRjbGVhclRpbWVvdXQoZGVmZXJUaW1lcik7XG5cdFx0XHRkZWZlclRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdGxhc3QgPSBub3c7XG5cdFx0XHRcdGZuLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuXHRcdFx0fSwgdGhyZXNoaG9sZCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGxhc3QgPSBub3c7XG5cdFx0XHRmbi5hcHBseShjb250ZXh0LCBhcmdzKTtcblx0XHR9XG5cdH07XG59XG5cblxuLy9zbGlkZSBlbGVtZW50c1xubGV0IGlnblNsaWRlVGltZXI7XG5cbmZ1bmN0aW9uIGlnblNsaWRlUHJvcGVydHlSZXNldCh0YXJnZXQpIHtcblx0Y2xlYXJUaW1lb3V0KGlnblNsaWRlVGltZXIpO1xuXHR0YXJnZXQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ2hlaWdodCcpO1xuXHR0YXJnZXQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ3BhZGRpbmctdG9wJyk7XG5cdHRhcmdldC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgncGFkZGluZy1ib3R0b20nKTtcblx0dGFyZ2V0LnN0eWxlLnJlbW92ZVByb3BlcnR5KCdtYXJnaW4tdG9wJyk7XG5cdHRhcmdldC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnbWFyZ2luLWJvdHRvbScpO1xuXHR0YXJnZXQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ292ZXJmbG93Jyk7XG5cdHRhcmdldC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgndHJhbnNpdGlvbi1kdXJhdGlvbicpO1xuXHR0YXJnZXQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ3RyYW5zaXRpb24tcHJvcGVydHknKTtcblxufVxuXG5cbmZ1bmN0aW9uIGlnblNsaWRlVXAodGFyZ2V0LCBkdXJhdGlvbiA9IC41KSB7XG5cdC8vYWRkIHRyYW5zaXRpb24gYW5kIHJlYWR5IHRoZSBwcm9wZXJ0aWVzXG5cdGlnblNsaWRlUHJvcGVydHlSZXNldCh0YXJnZXQpO1xuXHR0YXJnZXQuc3R5bGUuaGVpZ2h0ID0gdGFyZ2V0Lm9mZnNldEhlaWdodCArICdweCc7XG5cblx0dGFyZ2V0LnN0eWxlLnRyYW5zaXRpb25Qcm9wZXJ0eSA9ICdoZWlnaHQsIG1hcmdpbiwgcGFkZGluZyc7XG5cdHRhcmdldC5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSBkdXJhdGlvbiArICdzJztcblx0dGFyZ2V0LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XG5cdHRhcmdldC5zdHlsZS5wYWRkaW5nVG9wID0gMDtcblx0dGFyZ2V0LnN0eWxlLnBhZGRpbmdCb3R0b20gPSAwO1xuXHR0YXJnZXQuc3R5bGUubWFyZ2luQm90dG9tID0gMDtcblx0dGFyZ2V0LnN0eWxlLm1hcmdpblRvcCA9IDA7XG5cblxuXHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHR0YXJnZXQuc3R5bGUuaGVpZ2h0ID0gMDtcblx0fSwgMTAwKTtcblxuXHRpZ25TbGlkZVRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG5cdFx0dGFyZ2V0LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cdFx0aWduU2xpZGVQcm9wZXJ0eVJlc2V0KHRhcmdldCk7XG5cblx0fSwgZHVyYXRpb24gKiAxMDAwKTtcbn1cblxuXG4vKipcbiAqXG4gKiBAcGFyYW0gdGFyZ2V0XG4gKiBAcGFyYW0gZHVyYXRpb25cbiAqXG4gKiBTdHlsZSBlbGVtZW50IGFzIGl0IHNob3VsZCBzaG93IHRoZW4gc2V0IGl0IHRvIGRpc3BsYXkgbm9uZSAob3IgaGF2ZSBpdCBnZXQgZGlzcGxheSBub25lIGZyb20gc2xpZGUgdXAgb3Igc29tZXRoaW5nIGVsc2UpXG4gKi9cbmZ1bmN0aW9uIGlnblNsaWRlRG93bih0YXJnZXQsIGR1cmF0aW9uID0gLjUpIHtcblx0Ly9yZW1vdmUgYW55IGlubGluZSBwcm9wZXJ0aWVzIGZvciBkaXNwbGF5IGFuZCBwYWRkaW5nIGFuZCBtYXJnaW5zIHRoYXQgbWlnaHQgYmUgdGhlcmUsIG1heSBoYXZlIHByZXNzZWQgdGhpcyB3aGlsZSBpdCB3YXMgc2xpZGluZyBkb3duXG5cdGlnblNsaWRlUHJvcGVydHlSZXNldCh0YXJnZXQpO1xuXG5cblx0Ly9zYXZlIG9yaWdpbmFsIG1hcmdpbnMsIGNoZWNrIHdoZXRoZXIgd2UgYXJlIHNldHRpbmcgdG8gYmxvY2sgb3Igc29tZSBvdGhlciAoZmxleCwgaW5saW5lLWJsb2NrKS4uLlxuXHRsZXQgZGlzcGxheSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRhcmdldCkuZGlzcGxheTtcblx0Y29uc3QgcGFkZGluZyA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRhcmdldCkucGFkZGluZztcblx0Y29uc3QgbWFyZ2luID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUodGFyZ2V0KS5tYXJnaW47XG5cblxuXHQvL2lmIGl0cyBub25lIG1ha2UgaXQgYSBibG9jayBlbGVtZW50IHRoZW4gZ3JhYiBpdHMgaGVpZ2h0IHF1aWNrbHlcblx0aWYgKGRpc3BsYXkgPT09ICdub25lJykge1xuXHRcdGRpc3BsYXkgPSAnYmxvY2snO1xuXHR9XG5cblx0dGFyZ2V0LnN0eWxlLmRpc3BsYXkgPSBkaXNwbGF5OyAvL21pZ2h0IGJlIGlubGluZS1ibG9jay4uLlxuXG5cdC8vc2hvdyBlbGVtZW50IGZvciBzIG1pbGlzZWNvbmQgYW5kIGdyYWIgaGVpZ2h0XG5cdHRhcmdldC5zdHlsZS5oZWlnaHQgPSAnYXV0byc7XG5cdHRhcmdldC5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xuXHRsZXQgaGVpZ2h0ID0gdGFyZ2V0Lm9mZnNldEhlaWdodDsgLy9ncmFiIGhlaWdodCB3aGlsZSBhdXRvXG5cblx0Ly9zZXQgYW55IG90aGVyIHByb2JsZW1hdGljIHByb3BlcnR5IHRvIDBcblx0dGFyZ2V0LnN0eWxlLnRyYW5zaXRpb25Qcm9wZXJ0eSA9ICdub25lJztcblx0dGFyZ2V0LnN0eWxlLmhlaWdodCA9ICcwcHgnOyAvL3NldCBoZWlnaHQgYmFjayB0byAwXG5cdHRhcmdldC5zdHlsZS5wYWRkaW5nVG9wID0gJzBweCc7XG5cdHRhcmdldC5zdHlsZS5wYWRkaW5nQm90dG9tID0gJzBweCc7XG5cdHRhcmdldC5zdHlsZS5tYXJnaW5Ub3AgPSAnMHB4Jztcblx0dGFyZ2V0LnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcwcHgnO1xuXG5cdC8vc2V0IGRpc3BsYXkgdG8gc2hvdywgYnV0IHBhZGRpbmcgYW5kIGhlaWdodCB0byAwIHJpZ2h0IGF3YXlcblx0c2V0VGltZW91dCgoKSA9PiB7XG5cdFx0Ly90dXJuIG9uICB0cmFuc2l0aW9ucyBhZG4gYW5pbWF0ZSBwcm9wZXJ0aWVzIGJhY2sgdG8gbm9ybWFsXG5cdFx0dGFyZ2V0LnN0eWxlLnRyYW5zaXRpb25Qcm9wZXJ0eSA9IFwiaGVpZ2h0LCBtYXJnaW4sIHBhZGRpbmdcIjtcblx0XHR0YXJnZXQuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gZHVyYXRpb24gKyAncyc7XG5cdFx0dGFyZ2V0LnN0eWxlLnBhZGRpbmcgPSBwYWRkaW5nO1xuXHRcdHRhcmdldC5zdHlsZS5oZWlnaHQgPSBoZWlnaHQgKyAncHgnO1xuXHRcdHRhcmdldC5zdHlsZS5tYXJnaW4gPSBtYXJnaW47XG5cblx0fSwgMTAwKTtcblxuXHQvL2FmdGVyIGl0IHNsaWRlcyBvcGVuIHJlbW92ZSBwcm9wZXJ0aWVzXG5cdGlnblNsaWRlVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRpZ25TbGlkZVByb3BlcnR5UmVzZXQodGFyZ2V0KTtcblx0fSwgZHVyYXRpb24gKiAxMDAwKTtcbn1cblxuZnVuY3Rpb24gaWduU2xpZGVUb2dnbGUodGFyZ2V0LCBkdXJhdGlvbiA9IC41KSB7XG5cdGlmICh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0YXJnZXQpLmRpc3BsYXkgPT09ICdub25lJykge1xuXHRcdHJldHVybiBpZ25TbGlkZURvd24odGFyZ2V0LCBkdXJhdGlvbik7XG5cdH0gZWxzZSB7XG5cdFx0cmV0dXJuIGlnblNsaWRlVXAodGFyZ2V0LCBkdXJhdGlvbik7XG5cdH1cbn1cblxuIiwiLyotLS0tLS0tIG1vdmUgc3VibWVudXMgaWYgdG9vIGNsb3NlIHRvIGVkZ2Ugb24gZGVza3RvcCAtLS0tLS0tLSovXG5mdW5jdGlvbiBmaXhPZmZTY3JlZW5NZW51IChtZW51KSB7XG5cblx0Ly9tYWtlIGl0ZW0gdmlzaWJsZSBzbyB3ZSBjYW4gZ2V0IGxlZnQgZWRnZVxuXHRtZW51LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuXHRtZW51LnN0eWxlLm9wYWNpdHkgPSAnMCc7XG5cdGxldCByaWdodEVkZ2UgPSBtZW51LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnJpZ2h0O1xuXHRsZXQgbGVmdEVkZ2UgPSBtZW51LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnJpZ2h0O1xuXHQvL3NldCBtZW51IGJhY2tcblx0bWVudS5zdHlsZS5kaXNwbGF5ID0gJyc7XG5cdG1lbnUuc3R5bGUub3BhY2l0eSA9ICcnO1xuXG5cdGxldCB2aWV3cG9ydCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aDtcblxuXHQvL2lmIHRoZSBzdWJtZW51IGlzIG9mZiB0aGUgcGFnZSwgcHVsbCBpdCBiYWNrIHNvbWV3aGF0XG5cdGlmIChyaWdodEVkZ2UgPiB2aWV3cG9ydCkge1xuXHRcdG1lbnUuc3R5bGUubGVmdCA9ICc0MHB4Jztcblx0fVxuXG5cdGlmIChsZWZ0RWRnZSA8IDApIHtcblx0XHRtZW51LnN0eWxlLmxlZnQgPSAnNjAlJztcblx0fVxufVxuXG4vKlxub3BlbiBhbmQgY2xvc2VzIGEgbWVudSBkcm9wZG93biBiYXNlZCBvbiBwYXNzaW5nIHRoZSBkcm9wZG93biBidXR0b24uIFRoZSBidXR0b25zIGNsYXNzIGRldGVybWluZXMgaWYgaXQgb3BlbnMgb3IgY2xvc2VzXG5mb3IgaXQgdG8gb3BlbiBtYWtlIHN1cmUgdGhlIGJ1dHRvbiBiZWluZyBwYXNzZWQgaGFzIGEgY2xhc3Mgb2YgdG9nZ2xlZC1vblxuICovXG5mdW5jdGlvbiBvcGVuQ2xvc2VNZW51IChtZW51QnV0dG9uKSB7XG5cblx0bGV0IG1lbnVJdGVtID0gbWVudUJ1dHRvbi5jbG9zZXN0KCdsaScpO1xuXHRsZXQgc3ViTWVudSA9IG1lbnVJdGVtLnF1ZXJ5U2VsZWN0b3IoJy5zdWItbWVudScpO1xuXHRsZXQgaXNUb2dnbGVkID0gbWVudUJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoJ3RvZ2dsZWQtb24nKSA/ICdvcGVuJyA6ICdjbG9zZSc7XG5cblx0aWYgKGlzVG9nZ2xlZCA9PT0gJ29wZW4nKSB7XG5cdFx0Zml4T2ZmU2NyZWVuTWVudShzdWJNZW51KTtcblx0XHQvL2FkZCBjbGFzcyB0b2dnbGVkLW9uIHRvIGxpLiBjYW50IGRvIGl0IHZpYSBkYXRhLXRhcmdldCBjYXVzZSBtZW51IG1pZ2h0IGJlIHNob3dpbmcgdHdpY2Ugb24gcGFnZVxuXHRcdG1lbnVJdGVtLmNsYXNzTGlzdC5hZGQoJ3RvZ2dsZWQtb24nKTtcblx0XHRpZ25TbGlkZURvd24oc3ViTWVudSk7XG5cblx0XHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcGFnZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG5cdFx0XHRpZiAoIWUudGFyZ2V0LmNsb3Nlc3QoJy5tZW51LWl0ZW0udG9nZ2xlZC1vbicpKSB7XG5cdFx0XHRcdC8vY2xvc2UgbWVudXNcblx0XHRcdFx0bWVudUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCd0b2dnbGVkLW9uJyk7XG5cdFx0XHRcdG9wZW5DbG9zZU1lbnUobWVudUJ1dHRvbik7XG5cdFx0XHR9XG5cdFx0fSwgeyBvbmNlOiB0cnVlIH0pO1xuXG5cdH0gZWxzZSB7XG5cdFx0bWVudUl0ZW0uY2xhc3NMaXN0LnJlbW92ZSgndG9nZ2xlZC1vbicpO1xuXHRcdGlnblNsaWRlVXAoc3ViTWVudSk7XG5cdH1cblxufVxuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKCkge1xuXG5cdGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcblx0XHRsZXQgaXRlbSA9IGUudGFyZ2V0LmNsb3Nlc3QoJy5tZW51IGFbaHJlZj1cIiNcIl0nKTtcblx0XHRpZihpdGVtICYmIGl0ZW0ubmV4dEVsZW1lbnRTaWJsaW5nICE9IG51bGwpe1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0aXRlbS5uZXh0RWxlbWVudFNpYmxpbmcuY2xpY2soKTtcblx0XHR9XG5cdH0pO1xuXG5cdC8qLS0tLS0tLSBzbGlkZSBzdWIgbWVudXMgb3BlbiBhbmQgY2xvc2VkIHdoZW4gYSBkcm9wZG93biBidXR0b24gaXMgY2xpY2tlZCAtLS0tLS0tLSovXG5cdGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcignYWZ0ZXJUb2dnbGUnLCBldnQgPT4ge1xuXHRcdC8vZm9yIGV2ZXJ5IGRyb3Bkb3duIG1lbnUgYnV0dG9uICg+KSwgd2hlbiBjbGlja2VkLCB0b2dnbGUgdGhlIGxpIHBhcmVudCBhbmQgb3BlbiB0aGUgc3ViLW1lbnUgd2l0aCBzbGlkZVxuXHRcdGlmIChldnQudGFyZ2V0LmNsb3Nlc3QoJy5zdWJtZW51LWRyb3Bkb3duLXRvZ2dsZScpKSB7XG5cdFx0XHRvcGVuQ2xvc2VNZW51KGV2dC50YXJnZXQuY2xvc2VzdCgnLnN1Ym1lbnUtZHJvcGRvd24tdG9nZ2xlJykpO1xuXHRcdH1cblx0fSk7XG5cblx0LyotLS0tLS0tIE9wZW4gYW55IGN1cnJlbnQgbWVudSBpdGVtcyBpbiB2ZXJ0aWNhbCBtZW51cyAtLS0tLS0tLSovXG5cdC8vaWYgYSB2ZXJ0aWNhbCBtZW51IGhhcyBhIGN1cnJlbnQgaXRlbSBpdCBpcyBzZXQgdG8gZGlzcGxheSBibG9jay4gV2UgY2FuIHRhcmdldCB0aGF0IGFuZCB1c2UgaXQgdG8gc2V0IHRoZSBjbGljayB0byBvcGVuXG5cdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tZW51IC5jdXJyZW50LW1lbnUtaXRlbSAuc3ViLW1lbnUsIC5tZW51IC5jdXJyZW50LW1lbnUtcGFyZW50IC5zdWItbWVudScpLmZvckVhY2goc3ViTWVudSA9PiB7XG5cdFx0Ly9pZiBpdHMgYSB2ZXJ0aWNhbCBtZW51XG5cdFx0aWYgKGdldENvbXB1dGVkU3R5bGUoc3ViTWVudS5jbG9zZXN0KCcubWVudScpKS5mbGV4RGlyZWN0aW9uID09PSAnY29sdW1uJykge1xuXHRcdFx0c3ViTWVudS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcblx0XHRcdHN1Yk1lbnUuc3R5bGUuaGVpZ2h0ID0gJ2F1dG8nO1xuXHRcdFx0c3ViTWVudS5jbG9zZXN0KCcubWVudS1pdGVtJykuY2xhc3NMaXN0LmFkZCgndG9nZ2xlZC1vbicpO1xuXHRcdFx0c3ViTWVudS5jbG9zZXN0KCcubWVudS1pdGVtJykucXVlcnlTZWxlY3RvcignLnN1Ym1lbnUtZHJvcGRvd24tdG9nZ2xlJykuY2xhc3NMaXN0LmFkZCgndG9nZ2xlZC1vbicpO1xuXHRcdH1cblxuXHR9KTtcblxuXHQvKi0tLS0tLS0gVGFiYmluZyB0aHJvdWdoIHRoZSBtZW51IGZvciBBREEgY29tcGxpYW5jZSAtLS0tLS0tLSovXG5cblx0bGV0IGxhc3RUYWJiZWRJdGVtID0gJyc7XG5cblx0Ly9mb2N1c1xuXHRkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzaW4nLCBlID0+IHtcblxuXHRcdGlmIChlLnRhcmdldC5jbG9zZXN0KCcubWVudS1pdGVtLWxpbmsgYScpKSB7XG5cdFx0XHRsZXQgbWVudUl0ZW1MaW5rID0gZS50YXJnZXQuY2xvc2VzdCgnLm1lbnUtaXRlbS1saW5rIGEnKTtcblxuXHRcdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgZnVuY3Rpb24gKGUpIHtcblx0XHRcdFx0bGV0IGNvZGUgPSAoZS5rZXlDb2RlID8gZS5rZXlDb2RlIDogZS53aGljaCk7XG5cdFx0XHRcdC8vdGFiIG9yIHNoaWZ0IHRhYlxuXHRcdFx0XHRpZiAoY29kZSA9PT0gOSB8fCBjb2RlID09PSAxNikge1xuXHRcdFx0XHRcdG1lbnVJdGVtTGluay5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2ZvY3VzJyk7IC8vYWRkIGZvY3VzIHRvIC5tZW51LWl0ZW0tbGlua1xuXHRcdFx0XHRcdC8vaWYgdGhpcyBlbGVtZW50IGhhcyBhIGRyb3Bkb3duIG5lYXIgaXQsIHRvZ2dsZSBpdCBub3dcblx0XHRcdFx0XHRpZiAobWVudUl0ZW1MaW5rLm5leHRFbGVtZW50U2libGluZyAhPT0gbnVsbCAmJiAhbWVudUl0ZW1MaW5rLmNsb3Nlc3QoJ2xpJykuY2xhc3NMaXN0LmNvbnRhaW5zKCd0b2dnbGVkLW9uJykpIHtcblx0XHRcdFx0XHRcdG1lbnVJdGVtTGluay5uZXh0RWxlbWVudFNpYmxpbmcuY2xpY2soKTsgLy9jbGljayB0aGUgYnV0dG9uIHRvIG9wZW4gdGhlIHN1Yi1tZW51XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly9pZiB0aGVyZSBpcyBhbiBpdGVtIGZvY3VzZWQgYmVmb3JlXG5cdFx0XHRcdFx0aWYgKGxhc3RUYWJiZWRJdGVtKSB7XG5cdFx0XHRcdFx0XHQvL2NoZWNrIGlmIGxhc3QgaXRlbSBoYWQgYSBzdWIgbWVudSBhbmQgd2UgYXJlIG5vdCBpbnNpZGUgaXQgbm93XG5cdFx0XHRcdFx0XHRpZiAobGFzdFRhYmJlZEl0ZW0ubmV4dEVsZW1lbnRTaWJsaW5nICE9PSBudWxsICYmICFsYXN0VGFiYmVkSXRlbS5jbG9zZXN0KCdsaScpLmNvbnRhaW5zKG1lbnVJdGVtTGluaykpIHtcblx0XHRcdFx0XHRcdFx0bGFzdFRhYmJlZEl0ZW0ubmV4dEVsZW1lbnRTaWJsaW5nLmNsaWNrKCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH1cblxuXHRcdFx0fSwgeyBvbmNlOiB0cnVlIH0pO1xuXHRcdH1cblx0fSk7XG5cbi8vYmx1clxuXHRkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3Vzb3V0JywgZSA9PiB7XG5cblx0XHRpZiAoZS50YXJnZXQuY2xvc2VzdCgnLm1lbnUtaXRlbS1saW5rIGEnKSkge1xuXHRcdFx0bGV0IG1lbnVJdGVtTGluayA9IGUudGFyZ2V0LmNsb3Nlc3QoJy5tZW51LWl0ZW0tbGluayBhJyk7XG5cdFx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBmdW5jdGlvbiAoZSkge1xuXHRcdFx0XHRsZXQgY29kZSA9IChlLmtleUNvZGUgPyBlLmtleUNvZGUgOiBlLndoaWNoKTtcblx0XHRcdFx0Y29uc29sZS5sb2coY29kZSk7XG5cdFx0XHRcdGlmIChjb2RlID09PSA5IHx8IGNvZGUgPT09IDE2KSB7XG5cdFx0XHRcdFx0Ly9ibHVyIGN1cnJlbnQgdGFiYmVkIGl0ZW0sIGJ1dCBkb250IGNsb3NlIGl0IGlmIGl0cyBhIHN1Yi1tZW51XG5cdFx0XHRcdFx0bWVudUl0ZW1MaW5rLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnZm9jdXMnKTtcblx0XHRcdFx0XHRsYXN0VGFiYmVkSXRlbSA9IG1lbnVJdGVtTGluaztcblx0XHRcdFx0XHRjb25zdCBzdWJNZW51ID0gbWVudUl0ZW1MaW5rLmNsb3Nlc3QoJy5zdWItbWVudScpO1xuXG5cdFx0XHRcdFx0Ly9pZiB3ZSBibHVycmVkIGFuIGl0ZW0gaW4gYSBzdWItbWVudVxuXHRcdFx0XHRcdGlmIChzdWJNZW51ICE9PSBudWxsKSB7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZygnYmx1cnJlZCBpdGVtIGluc2lkZSBzdWItbWVudScpO1xuXHRcdFx0XHRcdFx0Y29uc3QgbWVudUl0ZW0gPSBtZW51SXRlbUxpbmsuY2xvc2VzdCgnLm1lbnUtaXRlbScpO1xuXHRcdFx0XHRcdFx0Ly9pZiBpdHMgdGhlIGxhc3QgaXRlbSBpbiB0aGUgc3VibWVudSBhbmQgaXQgZG9lcyBub3QgaGF2ZSBhIHN1Yi1tZW51IGl0c2VsZlxuXHRcdFx0XHRcdFx0aWYgKG1lbnVJdGVtLm5leHRFbGVtZW50U2libGluZyA9PSBudWxsICYmIG1lbnVJdGVtLnF1ZXJ5U2VsZWN0b3IoJy5zdWItbWVudScpID09IG51bGwpIHtcblx0XHRcdFx0XHRcdFx0bWVudUl0ZW0ucGFyZW50RWxlbWVudC5jbG9zZXN0KCcubWVudS1pdGVtJykucXVlcnlTZWxlY3RvcignLnN1Ym1lbnUtZHJvcGRvd24tdG9nZ2xlJykuY2xpY2soKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fVxuXHRcdFx0fSwgeyBvbmNlOiB0cnVlIH0pO1xuXG5cdFx0fVxuXHR9KTtcblxuXHQvL2FwcC1tZW51IGFiaWxpdHkgZm9yIHRoZSB0b3AgbWVudVxuXHRsZXQgYm9keSA9IGRvY3VtZW50LmJvZHk7XG5cdGxldCBtZW51VG9nZ2xlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBhbmVsLWxlZnQtdG9nZ2xlJyk7XG5cdGxldCB0b3BOYXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2l0ZS10b3AnKTtcblx0bGV0IHBhZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcGFnZScpO1xuXG5cdC8vZmlyc3QgbW92ZSB0aGUgYnV0dG9uIGludG8gc2l0ZS10b3AgaWYgYXBwLW1lbnUgaXMgYmVpbmcgdXNlZCBjYXVzZSB3ZSBkb250IHdhbnQgaXQgb24gdGhlIG91dHNpZGVcblx0aWYgKGJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKCdhcHAtbWVudScpKSB7XG5cdFx0dG9wTmF2LmFwcGVuZChtZW51VG9nZ2xlKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGNsb3NlQXBwTWVudSAoZSkge1xuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRtZW51VG9nZ2xlLmNsaWNrKCk7XG5cdH1cblxuXHQvL3doZW4gYnV0dG9uIGlzIG9wZW5lZCB3ZSB3aWxsIGxvY2sgdGhlIGJvZHkgc28gdGhlcmUgaXMgbm8gc2Nyb2xsaW5nIGFuZCB0aGVuIG9wZW4gdGhlIHBhZ2Vcblx0aWYgKG1lbnVUb2dnbGUpIHtcblx0XHRtZW51VG9nZ2xlLmFkZEV2ZW50TGlzdGVuZXIoJ2FmdGVyVG9nZ2xlJywgZSA9PiB7XG5cdFx0XHQvL2lmIGJ1dHRvbiBoYXMgYmVlbiB0b2dnbGVkIG9uXG5cdFx0XHRpZiAobWVudVRvZ2dsZS5jbGFzc0xpc3QuY29udGFpbnMoJ3RvZ2dsZWQtb24nKSkge1xuXHRcdFx0XHRib2R5LmNsYXNzTGlzdC5hZGQoJ2JvZHktbG9jaycpO1xuXG5cdFx0XHRcdC8vY2xpY2tpbmcgYW55d2hlcmUgb3V0c2lkZSB0aGUgbWVudSB3aWxsIGNsb3NlIGl0XG5cdFx0XHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zaXRlLWNvbnRlbnQnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlQXBwTWVudSwgeyBvbmNlOiB0cnVlIH0pO1xuXG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zaXRlLWNvbnRlbnQnKS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlQXBwTWVudSk7XG5cblx0XHRcdFx0aWYgKGJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKCdhcHAtbWVudScpKSB7XG5cdFx0XHRcdFx0cGFnZS5hZGRFdmVudExpc3RlbmVyKCd3ZWJraXRUcmFuc2l0aW9uRW5kIG90cmFuc2l0aW9uZW5kIG9UcmFuc2l0aW9uRW5kIG1zVHJhbnNpdGlvbkVuZCB0cmFuc2l0aW9uZW5kJywgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0Ym9keS5jbGFzc0xpc3QucmVtb3ZlKCdib2R5LWxvY2snKTsgLy9vbmx5IHJlbW92ZSB0b2dnbGUgYW5kIGhpZGUgbWVudSBvbmNlIHBhZ2UgaG9sZGVyIGZpbmlzaGVzIGl0cyB0cmFuc2l0aW9uIHRvIGNvdmVyIGl0LlxuXHRcdFx0XHRcdH0sIHsgb25jZTogdHJ1ZSB9KTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2JvZHktbG9jaycpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHR9KTtcblx0fVxuXG59KTsgLy9lbmQgcmVhZHlcblxualF1ZXJ5KGZ1bmN0aW9uICgkKSB7XG5cblx0Ly9tb3ZlIGxvZ28gaW4gbWlkZGxlIG9mIG1lbnUgb24gZGVza3RvcCBpZiBsb2dvIGlzIG1pZGRsZSBwb3NpdGlvblxuXHRpZiAoJCgnLmxvZ28taW4tbWlkZGxlJykubGVuZ3RoKSB7XG5cdFx0bGV0IG5hdmlnYXRpb25MaSA9ICQoJy5zaXRlLW5hdmlnYXRpb25fX25hdi1ob2xkZXIgLm1lbnUgbGknKTtcblx0XHRsZXQgbWlkZGxlID0gTWF0aC5mbG9vcigkKG5hdmlnYXRpb25MaSkubGVuZ3RoIC8gMikgLSAxO1xuXG5cdFx0Ly9hZGQgbG9nbyB0byB0aGUgbWlkZGxlIHdoZW4gcGFnZSBsb2Fkc1xuXHRcdCQoJzxsaSBjbGFzcz1cIm1lbnUtaXRlbSBsaS1sb2dvLWhvbGRlclwiPjxkaXYgY2xhc3M9XCJtZW51LWl0ZW0tbGlua1wiPjwvZGl2PjwvbGk+JykuaW5zZXJ0QWZ0ZXIobmF2aWdhdGlvbkxpLmZpbHRlcignOmVxKCcgKyBtaWRkbGUgKyAnKScpKTtcblx0XHQkKCcuc2l0ZS1sb2dvJykuY2xvbmUoKS5hcHBlbmRUbygnLmxpLWxvZ28taG9sZGVyJyk7XG5cdH1cblxufSk7XG4iLCJcbi8vdHVybiBpY29ucyBpbnRvIHN2ZyBpZiB1c2luZyB0aGUgaWNvbnMgdGhhdCBjb21lIHdpdGggdGhlbWUgZm9sZGVyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKCkge1xuXHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc3ZnLWljb24nKS5mb3JFYWNoKGljb24gPT57XG5cdFx0aWNvbi5jbGFzc0xpc3QucmVtb3ZlKCdzdmctaWNvbicpO1xuXG5cdFx0Ly9jbGFzc2xpc3QudmFsdWUgZG9lcyBub3Qgd29rciBpbiBpZTExLiB1c2UgZ2V0QXR0cmJpdXRlXG5cdFx0bGV0IGljb25DbGFzcyA9IGljb24uZ2V0QXR0cmlidXRlKCdjbGFzcycpO1xuXG5cdFx0Ly9pZTExIGRvZXMgbm90IHdvcmsgd2VsbCB3aXRoIG5vZGVzLiBuZWVkZWQgdG8gYWRkIGFzIHN0cmluZy4gbm8gY3JlYXRlZWxlbWVudE5TXG5cdFx0bGV0IGljb25TdHJpbmcgPSBgPHN2ZyBjbGFzcz1cImljb24gJHtpY29uQ2xhc3N9XCIgcm9sZT1cImltZ1wiPjx1c2UgaHJlZj1cIiMke2ljb25DbGFzc31cIiB4bGluazpocmVmPVwiIyR7aWNvbkNsYXNzfVwiPjwvdXNlPjwvc3ZnPmA7XG5cblx0XHQvLyBsZXQgaWNvbnN2ZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCdzdmcnKTtcblx0XHQvLyBpY29uc3ZnLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnaWNvbiAnICsgaWNvbkNsYXNzKTtcblx0XHQvLyBpY29uc3ZnLnNldEF0dHJpYnV0ZSgncm9sZScsICdpbWcnKTtcblx0XHQvL2ljb25zdmcuaW5uZXJIVE1MID0gYDx1c2UgaHJlZj1cIiMke2ljb25DbGFzc31cIiB4bGluazpocmVmPVwiIyR7aWNvbkNsYXNzfVwiPjwvdXNlPmA7XG5cblxuXHRcdGljb24uaW5zZXJ0QWRqYWNlbnRIVE1MKCdhZnRlcmVuZCcsIGljb25TdHJpbmcpO1xuXHRcdGljb24ucmVtb3ZlKCk7XG5cblx0fSk7XG59KTtcbiIsImpRdWVyeShmdW5jdGlvbigkKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgLy8gdGhlIGNzcyBzZWxlY3RvciBmb3IgdGhlIGNvbnRhaW5lciB0aGF0IHRoZSBpbWFnZSBzaG91bGQgYmUgYXR0YWNoZWQgdG8gYXMgYSBiYWNrZ3JvdW5kLWltYWdlXG4gICAgdmFyIGltZ0NvbnRhaW5lciA9ICcuYmFja2dyb3VuZC1pbWFnZSwgLmNvdmVyLWltYWdlJztcblxuICAgIGZ1bmN0aW9uIGdldEN1cnJlbnRTcmMoZWxlbWVudCwgY2IpXG4gICAge1xuICAgICAgICB2YXIgZ2V0U3JjO1xuICAgICAgICBpZiAoIXdpbmRvdy5IVE1MUGljdHVyZUVsZW1lbnQpIHtcbiAgICAgICAgICAgIGlmICh3aW5kb3cucmVzcGltYWdlKSB7XG4gICAgICAgICAgICAgICAgcmVzcGltYWdlKHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudHMgOiBbZWxlbWVudF1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHdpbmRvdy5waWN0dXJlZmlsbCkge1xuICAgICAgICAgICAgICAgIHBpY3R1cmVmaWxsKHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudHMgOiBbZWxlbWVudF1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNiKGVsZW1lbnQuc3JjKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGdldFNyYyA9IGZ1bmN0aW9uKClcbiAgICAgICAge1xuICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdsb2FkJywgZ2V0U3JjKTtcbiAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignZXJyb3InLCBnZXRTcmMpO1xuICAgICAgICAgICAgY2IoZWxlbWVudC5jdXJyZW50U3JjKTtcbiAgICAgICAgfTtcblxuICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBnZXRTcmMpO1xuICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZ2V0U3JjKTtcbiAgICAgICAgaWYgKGVsZW1lbnQuY29tcGxldGUpIHtcbiAgICAgICAgICAgIGdldFNyYygpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2V0QmdJbWFnZSgpIHtcbiAgICAgICAgJChpbWdDb250YWluZXIpLmVhY2goZnVuY3Rpb24oKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpLCBpbWcgPSAkdGhpcy5maW5kKCdpbWcnKS5nZXQoMCk7XG5cbiAgICAgICAgICAgIGdldEN1cnJlbnRTcmMoaW1nLCBmdW5jdGlvbihlbGVtZW50U291cmNlKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICR0aGlzLmNzcygnYmFja2dyb3VuZC1pbWFnZScsICd1cmwoJyArIGVsZW1lbnRTb3VyY2UgKyAnKScpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICgnb2JqZWN0Rml0JyBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUgPT09IGZhbHNlKSB7XG5cbiAgICAgICAgJCgnaHRtbCcpLmFkZENsYXNzKCduby1vYmplY3RmaXQnKTtcbiAgICAgICAgJCh3aW5kb3cpLnJlc2l6ZShmdW5jdGlvbigpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHNldEJnSW1hZ2UoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgc2V0QmdJbWFnZSgpO1xuICAgIH1cblxufSk7IiwiXG4vL21ha2UgaWZyYW1lIHZpZGVvcyByZXNwb25zaXZlXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKCkge1xuXHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpZnJhbWVbc3JjKj1cInlvdXR1YmUuY29tXCJdLCBpZnJhbWVbZGF0YS1zcmMqPVwieW91dHViZS5jb21cIl0sIGlmcmFtZVtzcmMqPVwidmltZW8uY29tXCJdLCBpZnJhbWVbZGF0YS1zcmMqPVwidmltZW8uY29tXCJdJykuZm9yRWFjaChpZnJhbWUgPT57XG5cdFx0aWYoISBpZnJhbWUucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ3ZpZGVvd3JhcHBlcicpKXtcblx0XHRcdHdyYXAoaWZyYW1lKS5jbGFzc0xpc3QuYWRkKCd2aWRlb3dyYXBwZXInKTtcblx0XHR9XG5cdH0pO1xufSk7XG4iLCJkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKCkge1xuXG5cblx0Ly9tb3ZlIHRoZSBoZWFkZXIgYWJvdmUgdGhlIGFydGljbGUgd2hlbiBoZWFkZXItYWJvdmUgaXMgZm91bmRcblx0Y29uc3QgaGVhZGVyQWJvdmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyLWFib3ZlJyk7XG5cdGlmIChoZWFkZXJBYm92ZSE9PW51bGwpIHtcblx0XHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZW50cnktaGVhZGVyLCAucGFnZS1oZWFkZXInKS5mb3JFYWNoKGhlYWRlciA9PiB7XG5cdFx0XHRoZWFkZXJBYm92ZS5wYXJlbnRFbGVtZW50LnByZXBlbmQoaGVhZGVyKTtcblx0XHRcdGhlYWRlci5jbGFzc0xpc3QuYWRkKCdoZWFkZXItbW92ZWQnKTsgLy9taWdodCBiZSB1c2VmdWwgZm9yIHNvbWVvbmVcblx0XHR9KTtcblx0fVxuXG5cdC8vd2hlbiBhIHNlY29uZGFyeSBpcyB1c2VkLCBhIHNpZGViYXIgaXMgc2hvd24sIG9uIGxvYWQgd2UgZG8gYSBmZXcgdGhpbmdzIHRvIHNtb290aCB0aGUgdHJhbnNpdGlvbiBvZiB0aGUgaGVhZGVyXG5cdGxldCBzaWRlYmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NlY29uZGFyeScpO1xuXHRpZiAoc2lkZWJhciE9PW51bGwpIHtcblx0XHRzaWRlYmFyLmlubmVySFRNTCA9IHNpZGViYXIuaW5uZXJIVE1MLnRyaW0oKTsgLy9pZiBtb3Zpbmcgc3R1ZmYgaW4gYW5kIG91dCBpdHMgZ29vZCB0byByZW1vdmUgZXh0cmEgc3BhY2Ugc28gOmVtcHR5IHdvcmtzXG5cdFx0bGV0IHNpZGViYXJUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zaWRlYmFyLXRlbXBsYXRlJyk7XG5cdFx0c2lkZWJhclRlbXBsYXRlLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuXHR9XG5cbn0pO1xuXG5cblxuXG4iLCJsZXQgc2Nyb2xsRXZlbnQgPSBuZXcgRXZlbnQoJ2FmdGVyU2Nyb2xsJywgeyBidWJibGVzOiB0cnVlIH0pOyAvL2J1YmJsZSBhbGxvd3MgZm9yIGRlbGVnYXRpb24gb24gYm9keVxuXG4vKipcbiAqIHJ1bnMgd2hlbiBhbiBhbmNob3IgaXMgY2xpY2tlZCBvciB0aGUgcGFnZSBsb2FkcyB3aXRoIGFuIGFuY2hvclxuICogdGhlIGl0ZW0gd2UgYXJlIHNjcm9sbGluZyB0byBjYW4gaGF2ZSBhbiBvZmZzZXRcbiAqIEBwYXJhbSBlbGVtZW50XG4gKi9cbmZ1bmN0aW9uIHNjcm9sbHRvSGFzaCAoZWxlbWVudCkge1xuXG5cdGxldCBvZmZzZXQgPSBlbGVtZW50LmRhdGFzZXQub2Zmc2V0IHx8ICdzdGFydCc7XG5cblx0Ly9pZiB0aGUgb2Zmc2V0IGlzIGEgc3RyaW5nICdzdGFydCwgY2VudGVyLCBvciBlbmQnXG5cdGlmIChpc05hTihwYXJzZUludChvZmZzZXQpKSkge1xuXHRcdGVsZW1lbnQuc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogJ3Ntb290aCcsIGJsb2NrOiBvZmZzZXQgfSk7XG5cdH0gZWxzZSB7XG5cdFx0Ly9mcm9tIHRvcCBzY3JvbGwgd2l0aCBvZmZzZXRcblx0XHRsZXQgZnJvbVRvcCA9IHdpbmRvdy5wYWdlWU9mZnNldCArIGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wICsgcGFyc2VJbnQob2Zmc2V0KTtcblxuXHRcdHdpbmRvdy5zY3JvbGwoeyBiZWhhdmlvcjogJ3Ntb290aCcsIHRvcDogZnJvbVRvcCB9KTtcblx0fVxuXG5cdC8vZmlyZSBzb21lIG1vcmUgZXZlbnRzXG5cdGVsZW1lbnQuZGlzcGF0Y2hFdmVudChzY3JvbGxFdmVudCk7XG59XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XG5cblx0aWYgKGxvY2F0aW9uLmhhc2gpIHtcblx0XHRzY3JvbGx0b0hhc2goZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihsb2NhdGlvbi5oYXNoKSk7XG5cdH1cblxuXHRkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG5cdFx0bGV0IGl0ZW0gPSBlLnRhcmdldC5jbG9zZXN0KCdhW2hyZWZePVwiI1wiXScpO1xuXG5cdFx0aWYgKGl0ZW0pIHtcblx0XHRcdGxldCBpdGVtSGFzaCA9IGl0ZW0uZ2V0QXR0cmlidXRlKCdocmVmJyk7XG5cblx0XHRcdGlmIChpdGVtSGFzaCAhPT0gJyMnICYmIGl0ZW1IYXNoICE9PSAnIzAnKSB7XG5cdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0c2Nyb2xsdG9IYXNoKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoaXRlbUhhc2gpKTtcblx0XHRcdH1cblx0XHR9XG5cdH0pO1xuXG59KTtcblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignYWZ0ZXJTY3JvbGwnLCBmdW5jdGlvbiAoZSkge1xuXHQvL3J1biBhbiBldmVudCBhZnRlciBzY3JvbGwgYmVnaW5zXG59KTtcblxuXG5cbiIsImxldCBzY3JvbGxNYWdpY0NvbnRyb2xsZXIgPSAnJztcblxuLy9zZXR1cCBzY3JvbGxlciBmdW5jdGlvblxuLyoqXG4gKiBlbGVtZW50IGNhbiBoYXZlIHRoZXNlIGRhdGEgYXR0cmlidXRlczpcbiAqIGRhdGEtc2Nyb2xsYW5pbWF0aW9uID0gYSBjbGFzcyB0byBhZGQgdG8gdGhpcyBlbGVtZW50IG9uIHNjcm9sbFxuICogZGF0YS1zY3JvbGx0cmlnZ2VyID0gdGhlIGVsZW1lbnQgdGhhdCB0cmlnZ2VycyB0aGUgc2NlbmUgdG8gc3RhcnRcbiAqIGRhdGEtc2Nyb2xsaG9vayA9IG9uRW50ZXIsIG9uTGVhdmUsIGRlZmF1bHQgaXMgY2VudGVyXG4gKiBkYXRhLXNjcm9sbG9mZnNldCA9IG9mZnNldCBmcm9tIHNjcm9sbGhvb2sgb24gdHJpZ2dlciBlbGVtZW50XG4gKiBkYXRhLXNjcm9sbGR1cmF0aW9uID0gaG93IGxvbmcgaXQgc2hvdWxkIGxhc3QuIGlmIG5vdCBzZXQsIDAgIGlzIHVzZWQgYW5kIHRoYXQgbWVhbnMgaXQgZG9lc250IHJlc2V0IHVudGlsIHlvdSBzY3JvbGwgdXAuXG4gKiBkYXRhLXNjcm9sbHNjcnViID0gdHdlZW5zIGJldHdlZW4gdHdvIGNsYXNzZXMgYXMgeW91IHNjcm9sbC4gdHdlZW4gZXhwZWN0cyBhIGR1cmF0aW9uLCBlbHNlIGR1cmF0aW9uIHdpbGwgYmUgMTAwXG4gKlxuICovXG5mdW5jdGlvbiBydW5TY3JvbGxlckF0dHJpYnV0ZXMoZWxlbWVudCkge1xuXHQvL3RoaXMgZnVuY3Rpb24gY2FuIGJlIHJ1biBvbiBhbiBhbGVtZW50IGV2ZW4gYWZ0ZXIgbG9hZCBhbmQgdGhleSB3aWxsIGJlIGFkZGVkIHRvIHNjcm9sbE1hZ2ljQ29udHJvbGxlclxuXHQvL3Njcm9sbG1hZ2ljIG11c3QgYmUgbG9hZGVkXG5cdGlmICgndW5kZWZpbmVkJyAhPSB0eXBlb2YgU2Nyb2xsTWFnaWMgJiYgZWxlbWVudC5oYXNBdHRyaWJ1dGUoJ2RhdGEtc2Nyb2xsYW5pbWF0aW9uJykpIHtcblxuXHRcdC8vc2Nyb2xsIGFuaW1hdGlvbiBhdHRyaWJ1dGVzXG5cdFx0bGV0IGFuaW1hdGlvbkNsYXNzID0gZWxlbWVudC5kYXRhc2V0LnNjcm9sbGFuaW1hdGlvbixcblx0XHRcdHRyaWdnZXJIb29rID0gZWxlbWVudC5kYXRhc2V0LnNjcm9sbGhvb2sgfHwgJ2NlbnRlcicsXG5cdFx0XHRvZmZzZXQgPSBlbGVtZW50LmRhdGFzZXQub2Zmc2V0IHx8IDAsXG5cdFx0XHR0cmlnZ2VyRWxlbWVudCA9IGVsZW1lbnQuZGF0YXNldC5zY3JvbGx0cmlnZ2VyIHx8IGVsZW1lbnQsXG5cdFx0XHRkdXJhdGlvbiA9IGVsZW1lbnQuZGF0YXNldC5kdXJhdGlvbiB8fCAwLFxuXHRcdFx0dHdlZW4gPSBlbGVtZW50LmRhdGFzZXQuc2Nyb2xsc2NydWIsXG5cdFx0XHRyZXZlcnNlID0gZWxlbWVudC5kYXRhc2V0LnJldmVyc2UgfHwgdHJ1ZTtcblx0XHRcdHNjZW5lID0gJyc7XG5cblx0XHQvL2lmIGFuaW1hdGlvbiBoYXMgd29yZCB1cCBvciBkb3duLCBpdHMgcHJvYmFibHkgYW4gYW5pbWF0aW9uIHRoYXQgbW92ZXMgaXQgdXAgb3IgZG93bixcblx0XHQvL3NvIG1ha2Ugc3VyZSB0cmlnZ2VyIGVsZW1lbnRcblx0XHRpZiAoLTEgIT09IGFuaW1hdGlvbkNsYXNzLnRvTG93ZXJDYXNlKCkuaW5kZXhPZigndXAnKSB8fCAtMSAhPT0gYW5pbWF0aW9uQ2xhc3MudG9Mb3dlckNhc2UoKS5pbmRleE9mKCdkb3duJykpIHtcblx0XHRcdC8vZ2V0IHBhcmVudCBlbGVtZW50IGFuZCBtYWtlIHRoYXQgdGhlIHRyaWdnZXIsIGJ1dCB1c2UgYW4gb2Zmc2V0IGZyb20gY3VycmVudCBlbGVtZW50XG5cdFx0XHRpZiAodHJpZ2dlckVsZW1lbnQgPT09IGVsZW1lbnQpIHtcblx0XHRcdFx0dHJpZ2dlckVsZW1lbnQgPSBlbGVtZW50LnBhcmVudEVsZW1lbnQ7XG5cdFx0XHRcdG9mZnNldCA9IChlbGVtZW50Lm9mZnNldFRvcCAtIHRyaWdnZXJFbGVtZW50Lm9mZnNldFRvcCkgKyBwYXJzZUludChvZmZzZXQpO1xuXHRcdFx0fVxuXHRcdFx0dHJpZ2dlckhvb2sgPSAnb25FbnRlcic7XG5cblx0XHR9XG5cblx0XHQvL2lmIGZpeGVkIGF0IHRvcCwgd3JhcCBpbiBkaXZcblx0XHRpZiAoZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2Nyb2xsYW5pbWF0aW9uJykgPT09ICdmaXhlZC1hdC10b3AnKSB7XG5cdFx0XHRsZXQgd3JhcHBlZEVsZW1lbnQgPSB3cmFwKGVsZW1lbnQsIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpKTtcblx0XHRcdHdyYXBwZWRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2ZpeGVkLWhvbGRlcicpO1xuXHRcdFx0dHJpZ2dlckhvb2sgPSAnb25MZWF2ZSc7XG5cdFx0XHR0cmlnZ2VyRWxlbWVudCA9IGVsZW1lbnQucGFyZW50RWxlbWVudDtcblx0XHR9XG5cblx0XHQvL2lmIHNjcm9sbHNjcnViIGV4aXN0cyB1c2VkIHR3ZWVubWF4XG5cdFx0aWYgKHR3ZWVuICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdGlmICghZHVyYXRpb24pIHtcblx0XHRcdFx0ZHVyYXRpb24gPSAxMDA7XG5cdFx0XHR9XG5cblx0XHRcdHR3ZWVuID0gVHdlZW5NYXgudG8oZWxlbWVudCwgLjY1LCB7XG5cdFx0XHRcdGNsYXNzTmFtZTogJys9JyArIGFuaW1hdGlvbkNsYXNzXG5cdFx0XHR9KTtcblxuXHRcdFx0Ly9maW5hbGx5IG91dHB1dCB0aGUgc2NlbmVcblx0XHRcdHNjZW5lID0gbmV3IFNjcm9sbE1hZ2ljLlNjZW5lKHtcblx0XHRcdFx0dHJpZ2dlckVsZW1lbnQ6IHRyaWdnZXJFbGVtZW50LFxuXHRcdFx0XHRvZmZzZXQ6IG9mZnNldCxcblx0XHRcdFx0dHJpZ2dlckhvb2s6IHRyaWdnZXJIb29rLFxuXHRcdFx0XHRkdXJhdGlvbjogZHVyYXRpb24sXG5cdFx0XHRcdHJldmVyc2U6IHJldmVyc2VcblxuXHRcdFx0fSkuc2V0VHdlZW4odHdlZW4pLmFkZFRvKHNjcm9sbE1hZ2ljQ29udHJvbGxlcilcblx0XHRcdC8vIC5hZGRJbmRpY2F0b3JzKClcblx0XHRcdDtcblx0XHR9IGVsc2Uge1xuXG5cdFx0XHRzY2VuZSA9IG5ldyBTY3JvbGxNYWdpYy5TY2VuZSh7XG5cdFx0XHRcdHRyaWdnZXJFbGVtZW50OiB0cmlnZ2VyRWxlbWVudCxcblx0XHRcdFx0b2Zmc2V0OiBvZmZzZXQsXG5cdFx0XHRcdHRyaWdnZXJIb29rOiB0cmlnZ2VySG9vayxcblx0XHRcdFx0ZHVyYXRpb246IGR1cmF0aW9uLFxuXHRcdFx0XHRyZXZlcnNlOiByZXZlcnNlXG5cblx0XHRcdH0pLm9uKCdlbnRlciBsZWF2ZScsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0Ly9pbnN0ZWFkIG9mIHVzaW5nIHRvZ2dsZSBjbGFzcyB3ZSBjYW4gdXNlIHRoZXNlIGV2ZW50cyBvZiBvbiBlbnRlciBhbmQgbGVhdmUgYW5kIHRvZ2dsZSBjbGFzcyBhdCBib3RoIHRpbWVzXG5cdFx0XHRcdGVsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZShhbmltYXRpb25DbGFzcyk7XG5cdFx0XHRcdGVsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJyk7XG5cblx0XHRcdFx0Ly9pZiBmaXhlZCBhdCB0b3Agc2V0IGhlaWdodCBmb3Igc3BhY2VyIGFuZCB3aWR0aFxuXHRcdFx0XHRpZihlbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1zY3JvbGxhbmltYXRpb24nKSA9PT0gJ2ZpeGVkLWF0LXRvcCcpe1xuXHRcdFx0XHRcdC8vbWFraW5nIGZpeGVkIGl0ZW0gaGF2ZSBhIHNldCB3aWR0aCBtYXRjaGluZyBwYXJlbnRcblx0XHRcdFx0XHRlbGVtZW50LnN0eWxlLndpZHRoID0gZWxlbWVudC5wYXJlbnRFbGVtZW50LmNsaWVudFdpZHRoICsgJ3B4Jztcblx0XHRcdFx0XHRlbGVtZW50LnN0eWxlLmxlZnQgPSBlbGVtZW50LnBhcmVudEVsZW1lbnQub2Zmc2V0TGVmdCArICdweCc7XG5cblx0XHRcdFx0fVxuXHRcdFx0fSkuYWRkVG8oc2Nyb2xsTWFnaWNDb250cm9sbGVyKVxuXHRcdFx0Ly8uc2V0Q2xhc3NUb2dnbGUoZWxlbWVudCwgYW5pbWF0aW9uQ2xhc3MgKyAnIGFjdGl2ZScpLmFkZFRvKHNjcm9sbE1hZ2ljQ29udHJvbGxlcilcblx0XHRcdC8vIC5hZGRJbmRpY2F0b3JzKClcblx0XHRcdDtcblx0XHR9XG5cblx0XHQvL2dvb2QgZm9yIGtub3dpbmcgd2hlbiBpdHMgYmVlbiBsb2FkZWRcblx0XHRkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ3Njcm9sbG1hZ2ljLWxvYWRlZCcpO1xuXG5cdH1cbn1cblxuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKCkge1xuXHQvKi0tLS0tLS0gU2Nyb2xsIE1hZ2ljIEV2ZW50cyBJbml0IC0tLS0tLS0tKi9cblx0aWYgKCd1bmRlZmluZWQnICE9IHR5cGVvZiBTY3JvbGxNYWdpYykge1xuXHRcdHNjcm9sbE1hZ2ljQ29udHJvbGxlciA9IG5ldyBTY3JvbGxNYWdpYy5Db250cm9sbGVyKCk7XG5cdFx0ZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtc2Nyb2xsYW5pbWF0aW9uXScpLmZvckVhY2goKGVsZW1lbnQpID0+IHtcblx0XHRcdHJ1blNjcm9sbGVyQXR0cmlidXRlcyhlbGVtZW50KTtcblx0XHR9KTtcblx0fVxufSk7XG4iXX0=